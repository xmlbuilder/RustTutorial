# ì‚¬ê³  ì²´ì¸ì§€ë¥¼ ìœ„í•œ 4ë‹¨ê³„

- ë¨¼ì € ë™ì‚¬ë¥¼ ë½‘ëŠ”ë‹¤: Log/Filter/Handle, Render/Validate/Apply, Load/Cache/Fetch â€¦
- ë™ì‚¬ë§ˆë‹¤ íŠ¸ë ˆì´íŠ¸ë¡œ í‘œì¤€í™”: trait Logger { fn log(&self, â€¦) }
- íŠ¸ë ˆì´íŠ¸ êµ¬í˜„ë¬¼ì„ ì¡°í•©í•´ì„œ íŒŒì´í”„/íŒŒì‚¬ë“œ êµ¬ì„±.
- ìƒíƒœëŠ” ì»¨í…ìŠ¤íŠ¸ í•˜ë‚˜ë¡œ ëª¨ì•„ì„œ &mut ctxë¡œ í˜ë¦°ë‹¤. (ë¶€ìˆ˜íš¨ê³¼ëŠ” ëª¨ë‘ ì—¬ê¸°ë¡œ)


## ğŸ§© 1ë‹¨ê³„: ë™ì‚¬ ì¶”ì¶œ â€“ Log / Filter / Handle
ìš°ë¦¬ê°€ ì²˜ë¦¬í•˜ê³  ì‹¶ì€ ë™ì‘ì„ ë¨¼ì € ë™ì‚¬ë¡œ ì¶”ìƒí™”í•©ë‹ˆë‹¤.  
```
// ë™ì‚¬: Log / Filter / Handle
```


## ğŸ§© 2ë‹¨ê³„: ë™ì‚¬ë§ˆë‹¤ íŠ¸ë ˆì‡ìœ¼ë¡œ í‘œì¤€í™”
ê° ë™ì‚¬ë¥¼ íŠ¸ë ˆì‡ìœ¼ë¡œ ì •ì˜í•´ì„œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê³ ì •í•©ë‹ˆë‹¤.  
```rust
trait Logger {
    fn log(&self, ctx: &mut Context, msg: &str);
}

trait Filter {
    fn filter(&self, ctx: &mut Context, msg: &str) -> bool;
}

trait Handler {
    fn handle(&self, ctx: &mut Context, msg: &str);
}
```


## ğŸ§© 3ë‹¨ê³„: íŠ¸ë ˆì‡ êµ¬í˜„ë¬¼ì„ ì¡°í•©í•´ì„œ íŒŒì´í”„ êµ¬ì„±
ê° íŠ¸ë ˆì‡ì„ êµ¬í˜„í•œ êµ¬ì¡°ì²´ë¥¼ ë§Œë“¤ê³ , íŒŒì‚¬ë“œ ë˜ëŠ” íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì¡°í•©í•©ë‹ˆë‹¤.  
```rust
struct ConsoleLogger;
impl Logger for ConsoleLogger {
    fn log(&self, ctx: &mut Context, msg: &str) {
        ctx.logs.push(format!("LOG: {}", msg));
    }
}

struct SpamFilter;
impl Filter for SpamFilter {
    fn filter(&self, _ctx: &mut Context, msg: &str) -> bool {
        !msg.contains("spam")
    }
}

struct PrintHandler;
impl Handler for PrintHandler {
    fn handle(&self, ctx: &mut Context, msg: &str) {
        ctx.handled.push(msg.to_string());
    }
}
```


## ğŸ§© 4ë‹¨ê³„: ìƒíƒœëŠ” Context í•˜ë‚˜ë¡œ ëª¨ì•„ì„œ &mut ctxë¡œ í˜ë¦°ë‹¤
ëª¨ë“  ë¶€ìˆ˜íš¨ê³¼ëŠ” Contextì— ì €ì¥í•˜ê³ , ê° ë‹¨ê³„ëŠ” &mut ctxë¥¼ ë°›ì•„ì„œ ìƒíƒœë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.  
```rust
struct Context {
    logs: Vec<String>,
    handled: Vec<String>,
}
```


## ğŸ§ª ì „ì²´ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì˜ˆì‹œ
```rust
fn main() {
    let logger = ConsoleLogger;
    let filter = SpamFilter;
    let handler = PrintHandler;

    let mut ctx = Context {
        logs: vec![],
        handled: vec![],
    };

    let messages = vec!["hello", "spam offer", "rust is great"];

    for msg in messages {
        logger.log(&mut ctx, msg);
        if filter.filter(&mut ctx, msg) {
            handler.handle(&mut ctx, msg);
        }
    }

    println!("Logs: {:?}", ctx.logs);
    println!("Handled: {:?}", ctx.handled);
}
```


## âœ¨ ê²°ê³¼ ì˜ˆì‹œ
```
Logs: ["LOG: hello", "LOG: spam offer", "LOG: rust is great"]
Handled: ["hello", "rust is great"]
```


## ì´ êµ¬ì¡°ëŠ” Rustì˜ ì² í•™ì— ë”± ë§ëŠ” ë°©ì‹:
- í–‰ìœ„ ì¤‘ì‹¬ ì‚¬ê³  (ë™ì‚¬ â†’ íŠ¸ë ˆì‡)
- êµ¬ì„± ê¸°ë°˜ ì„¤ê³„ (ì¡°í•© ê°€ëŠ¥í•œ êµ¬í˜„ì²´)
- ëª…ì‹œì  ìƒíƒœ íë¦„ (&mut ctx)


---

## ğŸ§  1. dyn Traitì„ í†µí•œ ëŸ°íƒ€ì„ ì¡°í•©
### âœ… ê°œë…
- ì„œë¡œ ë‹¤ë¥¸ êµ¬í˜„ì²´ë¥¼ **Trait ê°ì²´(Box, Rc, Arc ë“±)** ë¡œ ê°ì‹¸ì„œ  
ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¡œ ëŸ°íƒ€ì„ì— í˜¸ì¶œ ê°€ëŠ¥  
### âœ… ì˜ˆì‹œ: Logger íŒŒì´í”„ ì¡°í•©
```rust
trait Logger {
    fn log(&self, msg: &str);
}

struct ConsoleLogger;
impl Logger for ConsoleLogger {
    fn log(&self, msg: &str) {
        println!("Console: {}", msg);
    }
}

struct FileLogger;
impl Logger for FileLogger {
    fn log(&self, msg: &str) {
        println!("File: {}", msg);
    }
}

fn run_pipeline(loggers: Vec<Box<dyn Logger>>) {
    for logger in loggers {
        logger.log("Hello");
    }
}

fn main() {
    let pipeline: Vec<Box<dyn Logger>> = vec![
        Box::new(ConsoleLogger),
        Box::new(FileLogger),
    ];
    run_pipeline(pipeline);
}
```

### âœ… ì¥ì 
- ë‹¤ì–‘í•œ íƒ€ì…ì„ ë™ì¼í•œ Traitë¡œ ë¬¶ì–´ ì²˜ë¦¬ ê°€ëŠ¥
- ëŸ°íƒ€ì„ì— êµ¬ì„± ë³€ê²½ ê°€ëŠ¥ (í”ŒëŸ¬ê·¸ì¸, ì„¤ì • ê¸°ë°˜ ë“±)
### âŒ ë‹¨ì 
- vtable í˜¸ì¶œë¡œ ì„±ëŠ¥ ì†í•´
- í™ í• ë‹¹(Box) í•„ìš”

## ğŸ§© 2. enumì„ í†µí•œ íŒŒì´í”„ ë‹¨ê³„ í‘œí˜„
### âœ… ê°œë…
- ê° ë‹¨ê³„ êµ¬í˜„ì„ ì—´ê±°í˜•ìœ¼ë¡œ ì •ì˜í•˜ê³  match ë¬¸ìœ¼ë¡œ ë¶„ê¸° ì²˜ë¦¬í•¨

### âœ… ì˜ˆì‹œ: LoggerStep enum
```rust
enum LoggerStep {
    Console,
    File,
}

impl LoggerStep {
    fn log(&self, msg: &str) {
        match self {
            LoggerStep::Console => println!("Console: {}", msg),
            LoggerStep::File => println!("File: {}", msg),
        }
    }
}

fn run_pipeline(steps: Vec<LoggerStep>) {
    for step in steps {
        step.log("Hello");
    }
}
```

### âœ… ì¥ì 
- ì„±ëŠ¥ ë›°ì–´ë‚¨ (ì •ì  ë””ìŠ¤íŒ¨ì¹˜)
- ë©”ëª¨ë¦¬ í• ë‹¹ ì—†ìŒ (ìŠ¤íƒ ê¸°ë°˜)
- íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ ì œì–´ íë¦„ ëª…í™•
### âŒ ë‹¨ì 
- í™•ì¥ì„± ì œí•œ (ìƒˆ êµ¬í˜„ ì¶”ê°€ ì‹œ enum ìˆ˜ì • í•„ìš”)
- êµ¬ì„± ìœ ì—°ì„± ë‚®ìŒ (ëŸ°íƒ€ì„ íƒ€ì… ì¶”ê°€ ì–´ë ¤ì›€)

## âœ¨ ë¹„êµ ìš”ì•½
| ë°©ì‹                  | `dyn Trait` (ë™ì  ë””ìŠ¤íŒ¨ì¹˜)         | `enum` (ì •ì  ë””ìŠ¤íŒ¨ì¹˜)               |
|-----------------------|--------------------------------------|--------------------------------------|
| íƒ€ì… í™•ì¥ì„±           | âœ… ìœ ì—°í•¨ (ìƒˆ íƒ€ì… ì‰½ê²Œ ì¶”ê°€)         | âŒ ì œí•œì  (enum ìˆ˜ì • í•„ìš”)            |
| ëŸ°íƒ€ì„ êµ¬ì„± ê°€ëŠ¥ ì—¬ë¶€ | âœ… ê°€ëŠ¥ (Vec<Box<dyn Trait>> ë“±)      | âŒ ë¶ˆê°€ëŠ¥ (íƒ€ì… ê³ ì •ë¨)               |
| ì„±ëŠ¥                  | âŒ ëŠë¦¼ (vtable + heap)               | âœ… ë¹ ë¦„ (match + ìŠ¤íƒ)                |
| ì½”ë“œ ëª…ì‹œì„±           | âœ… ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜                    | âœ… ë¶„ê¸° ëª…í™•                          |
| ì‚¬ìš© ì˜ˆì‹œ             | í”ŒëŸ¬ê·¸ì¸, UI ìœ„ì ¯, ECS ì»´í¬ë„ŒíŠ¸       | ê³ ì •ëœ íŒŒì´í”„ë¼ì¸, FSM, DSL ì²˜ë¦¬ ë“±  |


----


