# block_on
ì´ì œ ë¹„ë™ê¸° ì²˜ë¦¬ì˜ í•µì‹¬ì¸ block_onì— ëŒ€í•´ì„œ ë¶„ì„  
ì•„ë˜ì— block_onì˜ ê°œë…ê³¼ ìƒ˜í”Œ ì½”ë“œì˜ íë¦„ì„ ë‹¨ê³„ì ìœ¼ë¡œ êµ¬ì¡°ì ìœ¼ë¡œ ì„¤ëª….

## ğŸ§© block_onì´ë€?
block_on(future)ëŠ”
ë¹„ë™ê¸° í•¨ìˆ˜(async fn)ë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
- ë¹„ë™ê¸° í•¨ìˆ˜ëŠ” Futureë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, ì§ì ‘ ì‹¤í–‰ë˜ì§€ ì•Šê³  ëŒ€ê¸° ìƒíƒœì— ìˆìŒ
- block_onì€ ê·¸ Futureë¥¼ ì™„ì „íˆ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
- ì¦‰, ë¹„ë™ê¸° ì½”ë“œë¥¼ ë™ê¸° ì½”ë“œì²˜ëŸ¼ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ

## ìƒ˜í”Œ ì½”ë“œ
```rust

use futures::executor::block_on;

async fn count_to(count: i32) {
    for i in 1..=count {
        println!("ìˆ˜: {i}ê°œ!");
    }
}

async fn async_main(count: i32) {
    count_to(count).await;
}

fn main() {
    block_on(async_main(10));
}
```
## ì¶œë ¥
```
ìˆ˜: 1ê°œ!
ìˆ˜: 2ê°œ!
ìˆ˜: 3ê°œ!
ìˆ˜: 4ê°œ!
ìˆ˜: 5ê°œ!
ìˆ˜: 6ê°œ!
ìˆ˜: 7ê°œ!
ìˆ˜: 8ê°œ!
ìˆ˜: 9ê°œ!
ìˆ˜: 10ê°œ!
```

## ğŸ” ìƒ˜í”Œ ì½”ë“œ ë‹¨ê³„ë³„ ì„¤ëª…
```rust
use futures::executor::block_on;
```
- futures í¬ë ˆì´íŠ¸ì˜ executorì—ì„œ block_onì„ ê°€ì ¸ì˜´
- ì´ executorëŠ” ê°„ë‹¨í•œ ì‹±ê¸€ ìŠ¤ë ˆë“œ ëŸ°íƒ€ì„ì„ ì œê³µ

### 1. async fn count_to(count: i32)
```rust
async fn count_to(count: i32) {
    for i in 1..=count {
        println!("ìˆ˜: {i}ê°œ!");
    }
}
```

- async fnì´ë¯€ë¡œ ì´ í•¨ìˆ˜ëŠ” `Future<Output = ()>` ë¥¼ ë°˜í™˜
- í•˜ì§€ë§Œ ì‹¤ì œë¡œ ì‹¤í–‰ë˜ì§€ëŠ” ì•ŠìŒ â†’ await í•„ìš”

### 2. async_main(count) ì •ì˜
```rust
async fn async_main(count: i32) {
    count_to(count).await;
}
```

- async_mainë„ Futureë¥¼ ë°˜í™˜
- ë‚´ë¶€ì—ì„œ count_to(count)ë¥¼ awaití•¨ìœ¼ë¡œì¨
â†’ count_toì˜ Futureë¥¼ ì‹¤í–‰í•¨

### 3. main()ì—ì„œ block_on
```rust
fn main() {
    block_on(async_main(10));
}
```

- async_main(10)ì€ Futureë¥¼ ë°˜í™˜
- block_on(...)ì€ ê·¸ Futureë¥¼ ì™„ì „íˆ ì‹¤í–‰ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
- ê²°ê³¼ì ìœ¼ë¡œ count_to(10)ê°€ ì‹¤í–‰ë˜ê³ 
â†’ ìˆ˜: 1ê°œ!ë¶€í„° ìˆ˜: 10ê°œ!ê¹Œì§€ ì¶œë ¥ë¨

## âœ… íë¦„ ìš”ì•½
```
main()
â””â”€â”€ block_on(async_main(10))
     â””â”€â”€ await count_to(10)
          â””â”€â”€ println! ìˆ˜: 1~10ê°œ!
```

â†’ block_onì€ ë¹„ë™ê¸° íë¦„ì„ ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ì§„ì…ì   
â†’ awaitëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë‹¤ë¥¸ Futureë¥¼ ì‹¤í–‰í•˜ëŠ” ì—°ê²°ì   

---

ì´ ì½”ë“œì—ì„œ 10ê°œì˜ ì‘ì—…ì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ì§€ë§Œ,  
ì‹¤ì œë¡œëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê³ ,  
block_onì€ **ê·¸ ì „ì²´ Futureê°€ ëë‚  ë•Œê¹Œì§€ ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ â€œë¸”ë¡œí‚¹â€** í•©ë‹ˆë‹¤.

## ğŸ” ì½”ë“œ íë¦„ ë‹¤ì‹œ ë³´ê¸°
```rust
async fn count_to(count: i32) {
    for i in 1..=count {
        println!("ìˆ˜: {i}ê°œ!");
    }
}
```

- ì´ í•¨ìˆ˜ëŠ” async fnì´ì§€ë§Œ, ë‚´ë¶€ì— awaitë‚˜ tokio::sleep() ê°™ì€ ë¹„ë™ê¸° ì‘ì—…ì´ ì—†ìŒ
- ê·¸ë˜ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ëŠ” ì•Šê³ , ë™ê¸°ì ìœ¼ë¡œ ë°˜ë³µë¬¸ì´ ì‹¤í–‰ë¨

## âœ… í•µì‹¬ ì •ë¦¬
| êµ¬ì„± ìš”ì†Œ       | ì—­í•  ì„¤ëª…                          |
|----------------|-------------------------------------|
| count_to()     | `async fn` â†’ Future ë°˜í™˜             |
| .await         | `count_to` Futureë¥¼ ì‹¤í–‰             |
| block_on(...)  | `async_main(10)` Futureë¥¼ ë™ê¸° ì‹¤í–‰  |


- ì¦‰, block_onì€ ì „ì²´ Futureê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” êµ¬ì¡°ì  ì§„ì…ì 
- ë‚´ë¶€ ì‘ì—…ì´ ì§„ì§œ ë¹„ë™ê¸°ì ì´ë¼ë©´, awaitë§ˆë‹¤ ìŠ¤ì¼€ì¤„ë§ì´ ë°œìƒí•˜ì§€ë§Œ ì§€ê¸ˆì€ ë™ê¸° ë°˜ë³µë¬¸ì´ Future ì•ˆì— ë“¤ì–´ê°

---
# await / block_on

awaitëŠ” ë¹„ë™ê¸° ì‘ì—…ì„ â€œì‹œì‘â€í•˜ê²Œ í•˜ê³ ,  
block_onì€ ê·¸ ì „ì²´ ì‘ì—…ì´ â€œëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ”â€ ì—­í• ì„ í•©ë‹ˆë‹¤.

## ğŸ§© í•µì‹¬ íë¦„ ì •ë¦¬
- async fnì€ Futureë¥¼ ë°˜í™˜í•  ë¿, ì‹¤í–‰ì€ ì•ˆ ë¨
- .awaitëŠ” ê·¸ Futureë¥¼ ì‹¤í–‰ ì‹œì‘í•˜ê²Œ í•¨
- ë‹¨, ë‚´ë¶€ì— ì§„ì§œ ë¹„ë™ê¸° ì‘ì—…ì´ ìˆì–´ì•¼ ìŠ¤ì¼€ì¤„ë§ì´ ë°œìƒí•¨
- block_on(future)ëŠ”
- ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë©ˆì¶”ê³ ,
- ê·¸ Futureê°€ ì™„ì „íˆ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

## ğŸ” ì˜ˆì‹œë¡œ ë³´ë©´
```rust
async fn do_work() {
    println!("ì‘ì—… ì‹œì‘");
    tokio::time::sleep(Duration::from_secs(1)).await;
    println!("ì‘ì—… ì™„ë£Œ");
}

fn main() {
    block_on(do_work());
}
```

- do_work()ëŠ” Futureë¥¼ ë°˜í™˜
- sleep().awaitëŠ” ì§„ì§œ ë¹„ë™ê¸° ì‘ì—… â†’ ìŠ¤ì¼€ì¤„ë§ ë°œìƒ
- block_on(...)ì€ ë©”ì¸ ìŠ¤ë ˆë“œë¥¼ ë©ˆì¶”ê³ , do_work()ê°€ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼



