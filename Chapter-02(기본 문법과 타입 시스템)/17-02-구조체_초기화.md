# 구조체 초기화

Rust에서는 구조체 내부에서 직접 필드를 초기화하는 로직을 정의할 수는 없습니다.  
즉, C#이나 Java처럼 구조체 안에 필드 초기화 코드를 넣는 건 불가능.  

## ❌ 안 되는 방식 (C#/Java 스타일)
```rust
struct MyStruct {
    value: u32 = 42; // ❌ Rust에서는 이런 초기화 문법이 없음
}
```


## ✅ Rust에서의 초기화 방식
Rust에서는 구조체를 만들 때 외부에서 값을 넣거나, impl 블록에서 생성자 메서드를 정의해서 초기화합니다:  
### 1. 직접 초기화
```rust
struct MyStruct {
    value: u32,
}

let s = MyStruct { value: 42 };
```

### 2. 생성자 메서드 (new)
```rust
impl MyStruct {
    fn new() -> Self {
        Self { value: 42 }
    }
}

let s = MyStruct::new();
```


## 🧠 왜 이렇게 설계됐을까?
- Rust는 명시적이고 예측 가능한 초기화를 중요시함
- 구조체는 단순한 데이터 묶음이므로, 초기화 로직은 외부에서 명확하게 처리하는 게 원칙
- 필드 초기화 순서나 조건을 숨기지 않도록 설계됨


## 🧠 언제 쓰나?
- 구조체를 기본값으로 초기화하고 싶을 때
- ..Default::default() 문법으로 일부 필드만 지정하고 나머지는 기본값으로 채울 때
- 제네릭 타입에서 T: Default 제약을 걸고 기본값을 생성할 때

## ✅ 기본 사용법
### 1. 구조체 정의
```rust
struct Config {
    retries: u32,
    verbose: bool,
}
```

### 2. Default 트레이트 구현
```rust
impl Default for Config {
    fn default() -> Self {
        Self {
            retries: 3,
            verbose: false,
        }
    }
}
```

### 3. 사용 예시
```rust
let cfg = Config::default(); // 기본값으로 생성
```


### 🔧 필드 일부만 지정하고 나머지는 기본값
```rust
let cfg = Config {
    verbose: true,
    ..Default::default()
};
```

- verbose는 직접 지정
- retries는 Default에서 가져옴

### 🧠 제네릭에서 활용
```rust
fn init<T: Default>() -> T {
    T::default()
}
```
- 어떤 타입이든 Default만 구현돼 있으면 기본값 생성 가능

### 📦 자동 구현되는 경우
- `#[derive(Default)]` 를 붙이면 자동으로 구현됨 (단, 모든 필드가 Default여야 함)
```rust
#[derive(Default)]
struct Point {
    x: i32,
    y: i32,
}
```


## ✅ 요약
| 항목                  | 설명                                                                 |
|-----------------------|----------------------------------------------------------------------|
| `T::default()`          | 기본값을 생성하는 표준 방식 (`let x = T::default()`)                   |
| `..Default::default()`  | 일부 필드만 지정하고 나머지는 기본값으로 채우는 문법                   |
| `T: Default`            | 제네릭에서 기본값을 요구할 때 사용하는 트레이트 제약 (`fn f<T: Default>()`) |
| `#[derive(Default)]`    | 모든 필드가 `Default`이면 자동으로 트레이트 구현 가능                    |

---

