# Slice / 배열 패턴 매칭 / 중첩 패턴 매칭
Rust의 패턴 매칭에서 슬라이스/배열 패턴 매칭과 중첩 패턴 매칭은 실전에서 매우 강력한 기능이지만,  
문서에서 종종 간과되곤 함.  
아래에 각각의 개념 설명, 샘플 코드, 그리고 실전 예제를 정리.

## 🧩 슬라이스 / 배열 패턴 매칭

### 🔍 개념 설명
Rust에서는 배열이나 슬라이스에 대해 패턴 매칭을 통해 길이, 특정 요소, 구조를 분해할 수 있음.  
특히 `[..]`, `[head, tail @ ..]`, `[a, b, ..]` 같은 문법은 가변 길이 배열을 다룰 때 유용합니다.

### ✅ 샘플 코드
```rust
fn describe(arr: &[i32]) {
    match arr {
        [] => println!("빈 배열입니다."),
        [x] => println!("하나의 요소: {}", x),
        [x, y] => println!("두 요소: {}, {}", x, y),
        [x, ..] => println!("첫 번째 요소: {}", x),
        [.., y] => println!("마지막 요소: {}", y),
        [x, y, ..] => println!("앞 두 요소: {}, {}", x, y),
        _ => println!("그 외의 배열"),
    }
}
```

#### 🛠 실전 예제: 명령어 파싱
```rust
fn parse_command(cmd: &[&str]) {
    match cmd {
        ["get", key] => println!("GET 명령: {}", key),
        ["set", key, value] => println!("SET 명령: {} = {}", key, value),
        ["del", key] => println!("DEL 명령: {}", key),
        [cmd, ..] => println!("알 수 없는 명령: {}", cmd),
        _ => println!("잘못된 입력"),
    }
}
```
```rust
fn main() {
    let input = vec!["set", "volume", "10"];
    parse_command(&input);
}
```


## 🧩 중첩 패턴 매칭
### 🔍 개념 설명
중첩 패턴 매칭은 enum 안에 또 다른 enum이나 구조체가 들어 있는 경우,  
한 번의 match로 내부까지 분해해서 처리할 수 있는 방식.

### ✅ 샘플 코드
```rust
enum Color {
    Rgb(u8, u8, u8),
    Cmyk(u8, u8, u8, u8),
}
```
```rust
enum Message {
    ChangeColor(Color),
    Quit,
}
```
```rust
fn handle(msg: Message) {
    match msg {
        Message::ChangeColor(Color::Rgb(r, g, b)) => {
            println!("RGB 색상 변경: {}, {}, {}", r, g, b);
        }
        Message::ChangeColor(Color::Cmyk(c, m, y, k)) => {
            println!("CMYK 색상 변경: {}, {}, {}, {}", c, m, y, k);
        }
        Message::Quit => println!("종료 메시지"),
    }
}
```

### 🛠 실전 예제: 이벤트 처리 시스템
```rust
enum Event {
    Input(InputEvent),
    System(SystemEvent),
}
```
```rust
enum InputEvent {
    KeyPress(char),
    MouseClick(i32, i32),
}
```
```rust
enum SystemEvent {
    Shutdown,
    Restart,
}
```
```rust
fn handle_event(event: Event) {
    match event {
        Event::Input(InputEvent::KeyPress(c)) => println!("키 입력: {}", c),
        Event::Input(InputEvent::MouseClick(x, y)) => println!("마우스 클릭: ({}, {})", x, y),
        Event::System(SystemEvent::Shutdown) => println!("시스템 종료"),
        Event::System(SystemEvent::Restart) => println!("시스템 재시작"),
    }
}
```

## 💬 결론
슬라이스 패턴 매칭은 가변 길이 데이터 처리에 강력하고,  
중첩 패턴 매칭은 복잡한 이벤트나 메시지 구조를 깔끔하게 처리할 수 있음.

---


---
