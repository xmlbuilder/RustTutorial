# Shared Memory

## ğŸ§  í•µì‹¬ ê°œë…: Shared Memory IPC
- ê³µìœ  ë©”ëª¨ë¦¬ëŠ” ìš´ì˜ì²´ì œê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ, ë‘ ê°œ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì¼í•œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
- Rustì—ì„œëŠ” ì´ë¥¼ ìœ„í•´ ë©”ëª¨ë¦¬ ë§µí•‘(mmap), FFI ê¸°ë°˜ C ë¼ì´ë¸ŒëŸ¬ë¦¬, ë˜ëŠ” ì „ìš© í¬ë ˆì´íŠ¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

## ğŸ§ª ì‹¤ë¬´ìš© í¬ë ˆì´íŠ¸ ì˜ˆì‹œ
### 1.  í¬ë ˆì´íŠ¸
- IpcSharedMemory êµ¬ì¡°ì²´ë¥¼ í†µí•´ ê³µìœ  ë©”ëª¨ë¦¬ ì˜ì—­ì„ ìƒì„±í•˜ê³  ì „ë‹¬ ê°€ëŠ¥
- ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•˜ë ¤ë©´ ë‹¨ì¼ ì½ê¸°/ì“°ê¸° êµ¬ì¡°ë¥¼ ìœ ì§€í•´ì•¼ í•¨
- ì˜ˆ: í•œ í”„ë¡œì„¸ìŠ¤ê°€ IpcSharedMemoryë¥¼ ìƒì„±í•˜ê³ , ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì „ë‹¬í•˜ì—¬ ì½ê¸°
### 2.  í¬ë ˆì´íŠ¸
- ë©”ëª¨ë¦¬ ë§µí•‘ì„ í†µí•´ íŒŒì¼ ë˜ëŠ” ìµëª… ë©”ëª¨ë¦¬ë¥¼ ê³µìœ 
- unsafe ì½”ë“œê°€ í•„ìš”í•  ìˆ˜ ìˆìŒ â†’ ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©
### 3.  (FFI ê¸°ë°˜)
- ê³ ì„±ëŠ¥ IPCë¥¼ ìœ„í•œ C++ ê¸°ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬
- Rustì—ì„œ FFIë¡œ ì‚¬ìš© ê°€ëŠ¥
- ì‹±ê¸€ í”„ë¡œë“€ì„œ-ì‹±ê¸€ ì»¨ìŠˆë¨¸ êµ¬ì¡°ì— ì í•©

## âœ… ì‹¤ë¬´ ì˜ˆì‹œ íë¦„
- í”„ë¡œì„¸ìŠ¤ Aê°€ ê³µìœ  ë©”ëª¨ë¦¬ ìƒì„± (IpcSharedMemory, mmap, etc.)
- í•´ë‹¹ ë©”ëª¨ë¦¬ í•¸ë“¤ì„ í”„ë¡œì„¸ìŠ¤ Bì— ì „ë‹¬ (ì†Œì¼“, íŒŒì¼ ë””ìŠ¤í¬ë¦½í„° ë“±)
- í”„ë¡œì„¸ìŠ¤ Bê°€ í•´ë‹¹ ë©”ëª¨ë¦¬ë¥¼ ë§¤í•‘í•˜ì—¬ ì ‘ê·¼
- ë‘ í”„ë¡œì„¸ìŠ¤ ê°„ì— ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜ í•„ìš” (ì˜ˆ: ë®¤í…ìŠ¤, ì„¸ë§ˆí¬ì–´)

## âš ï¸ ì£¼ì˜í•  ì 
- RustëŠ” ê¸°ë³¸ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ê°„ ê³µìœ  ë©”ëª¨ë¦¬ë¥¼ ì§ì ‘ ì§€ì›í•˜ì§€ ì•ŠìŒ
- ëŒ€ë¶€ë¶„ì˜ êµ¬í˜„ì€ ìš´ì˜ì²´ì œ ê¸°ëŠ¥ + unsafe ì½”ë“œ + ì™¸ë¶€ í¬ë ˆì´íŠ¸ ì¡°í•©
- ë©”ëª¨ë¦¬ ë™ê¸°í™”ì™€ ì•ˆì „ì„± í™•ë³´ê°€ í•µì‹¬

---

# memmap2

 Rustì—ì„œ ê°€ì¥ ì„ í˜¸ë˜ëŠ” Shared Memory IPC ë°©ì‹ì€ ì‹¤ë¬´ ê¸°ì¤€ìœ¼ë¡œ ë³´ë©´  í¬ë ˆì´íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ ë§µí•‘ ê¸°ë°˜ ì ‘ê·¼ ë°©ì‹ì…ë‹ˆë‹¤.  
 ì´ ë°©ì‹ì€ ìš´ì˜ì²´ì œì˜ ë©”ëª¨ë¦¬ ë§¤í•‘ ê¸°ëŠ¥ì„ í™œìš©í•´ íŒŒì¼ ë˜ëŠ” ìµëª… ë©”ëª¨ë¦¬ ì˜ì—­ì„ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ê³µìœ í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

## âœ… ì™œ memmap2ê°€ ì„ í˜¸ë ê¹Œ?

| í•­ëª© ë˜ëŠ” ì¥ì          | ì„¤ëª… ë˜ëŠ” íš¨ê³¼                                      |
|------------------------|-----------------------------------------------------|
| `unsafe` ìµœì†Œí™”        | ë©”ëª¨ë¦¬ ë§¤í•‘ì€ ìœ„í—˜í•˜ì§€ë§Œ `memmap2`ëŠ” ì•ˆì „í•œ ë˜í¼ ì œê³µ |
| í¬ë¡œìŠ¤ í”Œë«í¼ ì§€ì›     | Windows, Linux, macOS ëª¨ë‘ì—ì„œ ë™ì‘ ê°€ëŠ¥             |
| íŒŒì¼ ê¸°ë°˜ ê³µìœ          | íŒŒì¼ì„ í†µí•´ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë™ì¼ ë©”ëª¨ë¦¬ ì ‘ê·¼ ê°€ëŠ¥     |
| ì„±ëŠ¥ ìš°ìˆ˜              | ë””ìŠ¤í¬ I/O ì—†ì´ ë©”ëª¨ë¦¬ì²˜ëŸ¼ ë¹ ë¥´ê²Œ ì½ê³  ì“°ê¸° ê°€ëŠ¥       |
| ê°„ë‹¨í•œ API             | `Mmap`, `MmapMut`ë¡œ ì§ê´€ì ì¸ ì½ê¸°/ì“°ê¸° êµ¬í˜„ ê°€ëŠ¥       |



## ğŸ› ï¸ ê³µìœ  ë©”ëª¨ë¦¬ ìƒì„± ë° ì ‘ê·¼ ì˜ˆì œ
### 1. Cargo.tomlì— í¬ë ˆì´íŠ¸ ì¶”ê°€
```
[dependencies]
memmap2 = "0.5"
```


### 2. ê³µìœ  ë©”ëª¨ë¦¬ ìƒì„± (ì“°ê¸° í”„ë¡œì„¸ìŠ¤)
```rust
use std::fs::OpenOptions;
use std::io::Write;
use memmap2::MmapMut;

fn main() -> std::io::Result<()> {
    // ê³µìœ  íŒŒì¼ ìƒì„±
    let file = OpenOptions::new()
        .read(true)
        .write(true)
        .create(true)
        .open("shared.dat")?;

    // í¬ê¸° ì§€ì • (ì˜ˆ: 128ë°”ì´íŠ¸)
    file.set_len(128)?;

    // ë©”ëª¨ë¦¬ ë§¤í•‘ (ì“°ê¸° ê°€ëŠ¥)
    let mut mmap = unsafe { MmapMut::map_mut(&file)? };

    // ë°ì´í„° ì“°ê¸°
    mmap[..5].copy_from_slice(b"Hello");

    // flushë¡œ ë””ìŠ¤í¬ì— ë°˜ì˜ (ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì½ì„ ìˆ˜ ìˆê²Œ)
    mmap.flush()?;

    Ok(())
}
```


### 3. ê³µìœ  ë©”ëª¨ë¦¬ ì½ê¸° (ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤)
```rust
use std::fs::File;
use memmap2::Mmap;

fn main() -> std::io::Result<()> {
    // ê³µìœ  íŒŒì¼ ì—´ê¸°
    let file = File::open("shared.dat")?;

    // ë©”ëª¨ë¦¬ ë§¤í•‘ (ì½ê¸° ì „ìš©)
    let mmap = unsafe { Mmap::map(&file)? };

    // ë°ì´í„° ì½ê¸°
    let msg = std::str::from_utf8(&mmap[..5]).unwrap();
    println!("ì½ì€ ë©”ì‹œì§€: {}", msg); // â†’ Hello

    Ok(())
}
```


## ğŸ§  ì‹¤ë¬´ íŒ

| í•­ëª© ë˜ëŠ” ëª©ì             | ì„¤ëª… ë˜ëŠ” ì ìš© ë°©ì‹                          |
|---------------------------|-----------------------------------------------|
| ê³µìœ  íŒŒì¼ ê²½ë¡œ            | `shared.dat` ê°™ì€ íŒŒì¼ ê¸°ë°˜ ë©”ëª¨ë¦¬ ê³µìœ        |
| ìµëª… ê³µìœ  ë©”ëª¨ë¦¬          | `memfd_create`, `/dev/shm` (Linux ì „ìš©)       |
| ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜           | `Mutex`, `Atomic`, `semaphore` ë“±ìœ¼ë¡œ ì¶©ëŒ ë°©ì§€ |
| ì¶”ì²œ í¬ë ˆì´íŠ¸             | `memmap2` â†’ ì•ˆì „í•˜ê³  ë²”ìš©ì ì¸ mmap ì§€ì›       |

---

# int/float ë„˜ê¸°ê¸°

Shared Memoryë¥¼ í†µí•´ integer, float ê°™ì€ ì›ì‹œ ê°’ë„ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ë„˜ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
Rustì—ì„œëŠ” ì´ë¥¼ ìœ„í•´ ë©”ëª¨ë¦¬ ë§¤í•‘ëœ ë²„í¼ì— ë°”ì´ë„ˆë¦¬ í˜•ì‹ìœ¼ë¡œ ê°’ì„ ì§ì ‘ ì“°ê³  ì½ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. 
ì•„ë˜ì— memmap2 ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ ìˆ«ì ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª….

## ğŸ§© í•µì‹¬ ê°œë…
- i32, f64 ê°™ì€ ê°’ì€ ë°”ì´íŠ¸ ë°°ì—´ë¡œ ë³€í™˜í•´ì„œ ê³µìœ  ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì•¼ í•¨
- Rustì˜ to_le_bytes() / from_le_bytes()ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆì „í•˜ê²Œ ë³€í™˜ ê°€ëŠ¥
- ê³µìœ  ë©”ëª¨ë¦¬ëŠ” memmap2ë¡œ ìƒì„±í•˜ê³ , ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ ì ‘ê·¼

## ğŸ› ï¸ ì˜ˆì œ: ìˆ«ì ê°’ì„ ê³µìœ  ë©”ëª¨ë¦¬ì— ì“°ê³  ì½ê¸°
### 1. ì“°ê¸° í”„ë¡œì„¸ìŠ¤ (integer + float ì €ì¥)
```rust
use std::fs::OpenOptions;
use memmap2::MmapMut;

fn main() -> std::io::Result<()> {
    let file = OpenOptions::new()
        .read(true)
        .write(true)
        .create(true)
        .open("shared.dat")?;

    file.set_len(16)?; // i32(4) + f64(8) + ì—¬ìœ 

    let mut mmap = unsafe { MmapMut::map_mut(&file)? };

    let int_val: i32 = 42;
    let float_val: f64 = 3.1415;

    // ë°”ì´íŠ¸ë¡œ ë³€í™˜í•´ì„œ ì €ì¥
    mmap[0..4].copy_from_slice(&int_val.to_le_bytes());
    mmap[4..12].copy_from_slice(&float_val.to_le_bytes());

    mmap.flush()?; // ë””ìŠ¤í¬ì— ë°˜ì˜

    Ok(())
}
```


### 2. ì½ê¸° í”„ë¡œì„¸ìŠ¤ (integer + float ë³µì›)
```rust
use std::fs::File;
use memmap2::Mmap;

fn main() -> std::io::Result<()> {
    let file = File::open("shared.dat")?;
    let mmap = unsafe { Mmap::map(&file)? };

    let int_val = i32::from_le_bytes(mmap[0..4].try_into().unwrap());
    let float_val = f64::from_le_bytes(mmap[4..12].try_into().unwrap());

    println!("ì½ì€ ê°’: int = {}, float = {}", int_val, float_val);

    Ok(())
}
```

## ğŸ§  ì‹¤ë¬´ íŒ

| íƒ€ì…     | ë³€í™˜ ë°©ë²•                                 | ë°”ì´íŠ¸ í¬ê¸° | ë¹„ê³                          |
|----------|-------------------------------------------|-------------|------------------------------|
| `i32`    | `.to_le_bytes()` / `.from_le_bytes()`     | 4 bytes     | ì •ìˆ˜ ê°’ ê³µìœ ì— ì‚¬ìš©           |
| `f64`    | `.to_le_bytes()` / `.from_le_bytes()`     | 8 bytes     | ì‹¤ìˆ˜ ê°’ ê³µìœ ì— ì‚¬ìš©           |
| `bool`   | `u8`ë¡œ ë³€í™˜ (`0` ë˜ëŠ” `1`)                | 1 byte      | `true` â†’ `1`, `false` â†’ `0`   |


- Endian: ëŒ€ë¶€ë¶„ì˜ ì‹œìŠ¤í…œì€ little-endian â†’ to_le_bytes() ì‚¬ìš©
- ì •ë ¬: ì—¬ëŸ¬ ê°’ì„ ì €ì¥í•  ë•ŒëŠ” ë°”ì´íŠ¸ ì˜¤í”„ì…‹ì„ ì •í™•íˆ ê³„ì‚°í•´ì•¼ í•¨
- ë™ê¸°í™”: ë™ì‹œì— ì½ê³  ì“°ëŠ” ê²½ìš° Atomic ë˜ëŠ” Mutexë¡œ ë³´í˜¸ í•„ìš”


---

# ë™ê¸°í™”

í”„ë¡œì„¸ìŠ¤ ê°„ ë™ê¸°í™”ëŠ” ì •ë§ ê¹Œë‹¤ë¡­ê³ , ì˜ëª»í•˜ë©´ ë°ì´í„° ë ˆì´ìŠ¤, êµì°© ìƒíƒœ, ì„±ëŠ¥ ì €í•˜ê¹Œì§€ ì¼ì–´ë‚  ìˆ˜ ìˆìŒ. 
ê·¸ë˜ì„œ ì‹¤ë¬´ì—ì„œëŠ” ë§ì”€í•˜ì‹  ê²ƒì²˜ëŸ¼ ì¼ë°©í–¥ íë¦„ + í”Œë˜ê·¸ ê¸°ë°˜ ì„¤ê³„ê°€ í›¨ì”¬ ì•ˆì •ì ì´ê³  ê´€ë¦¬í•˜ê¸° ì‰¬ìš´ ë°©ì‹.

## âœ… ì™œ í”Œë˜ê·¸ ê¸°ë°˜ ì¼ë°©í–¥ êµ¬ì¡°ê°€ ì„ í˜¸ë ê¹Œ?
| í•­ëª© ë˜ëŠ” ì´ìœ              | ì„¤ëª… ë˜ëŠ” íš¨ê³¼                                 |
|----------------------------|------------------------------------------------|
| ë™ê¸°í™” ë¶€ë‹´ ê°ì†Œ           | `Mutex`, `Semaphore` ì—†ì´ë„ ì•ˆì „í•˜ê²Œ ë™ì‘ ê°€ëŠ¥ |
| êµ¬ì¡°ê°€ ë‹¨ìˆœí•¨              | ì½ê¸°/ì“°ê¸° ì—­í• ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë¨               |
| ë””ë²„ê¹…ì´ ì‰¬ì›€              | `flag` ìƒíƒœë§Œ ë³´ë©´ í˜„ì¬ íë¦„ íŒŒì•… ê°€ëŠ¥         |
| ì‹¤ì‹œê°„ ì²˜ë¦¬ì— ì í•©         | ë¹ ë¥¸ ë°˜ì‘ê³¼ ë‚®ì€ ì§€ì—° â†’ CAD, ì„¼ì„œ, ë Œë”ë§ì— ìœ ë¦¬ |


## ğŸ§  êµ¬ì¡° ì„¤ê³„ ì˜ˆì‹œ
### ğŸ“¦ ê³µìœ  ë©”ëª¨ë¦¬ êµ¬ì¡° (128 bytes)

| Offset ë²”ìœ„ | íƒ€ì…   | ì—­í•  ë˜ëŠ” ì„¤ëª…                     |
|-------------|--------|------------------------------------|
| 0           | `u8`   | ìƒíƒœ í”Œë˜ê·¸ (`0`: ë¹„ì–´ ìˆìŒ, `1`: ë°ì´í„° ìˆìŒ) |
| 1 ~ 4       | `i32`  | ì •ìˆ˜ ê°’ (ì˜ˆ: ìƒíƒœ ì½”ë“œ, ì¢Œí‘œ ë“±)   |
| 5 ~ 12      | `f64`  | ì‹¤ìˆ˜ ê°’ (ì˜ˆ: ì„¼ì„œ ê°’, ìœ„ì¹˜ ë“±)     |
| 13 ~ 127    | `u8[]` | ì—¬ìœ  ê³µê°„ ë˜ëŠ” í™•ì¥ìš© ë°ì´í„° ì˜ì—­   |



## ğŸ” íë¦„ ì˜ˆì‹œ
- Writer í”„ë¡œì„¸ìŠ¤
- flag == 0ì´ë©´ â†’ ë°ì´í„° ì“°ê¸°
- ê°’ ì €ì¥ í›„ flag = 1ë¡œ ì„¤ì •
- Reader í”„ë¡œì„¸ìŠ¤
- flag == 1ì´ë©´ â†’ ë°ì´í„° ì½ê¸°
- ì½ì€ í›„ flag = 0ìœ¼ë¡œ ì´ˆê¸°í™”
ì´ë ‡ê²Œ í•˜ë©´ ì„œë¡œ ì¶©ëŒ ì—†ì´ ì•ˆì „í•˜ê²Œ ë°ì´í„°ë¥¼ êµí™˜í•  ìˆ˜ ìˆì–´ìš”.
ë¬¼ë¡  ì´ êµ¬ì¡°ë„ ì™„ë²½í•˜ì§„ ì•Šì§€ë§Œ, ë‹¨ë°©í–¥ íë¦„ì—ì„œëŠ” Mutex ì—†ì´ë„ ì¶©ë¶„íˆ ì•ˆì •ì .

## ğŸ› ï¸ ì‹¤ë¬´ íŒ
- AtomicU8ì„ ì“°ë©´ flagë¥¼ ìŠ¤ë ˆë“œ/í”„ë¡œì„¸ìŠ¤ ì•ˆì „í•˜ê²Œ ê´€ë¦¬ ê°€ëŠ¥
- flagë¥¼ 2ë¡œ ì„¤ì •í•´ì„œ â€œì½ëŠ” ì¤‘â€ ê°™ì€ ìƒíƒœë„ í‘œí˜„ ê°€ëŠ¥
- sleep()ì´ë‚˜ poll()ì„ í™œìš©í•´ ê°„ë‹¨í•œ ëŒ€ê¸° ë£¨í”„ë„ êµ¬í˜„ ê°€ëŠ¥


---

# sleep / poll

sleep()ì´ë‚˜ poll()ì„ í™œìš©í•œ ê°„ë‹¨í•œ ëŒ€ê¸° ë£¨í”„ëŠ” Shared Memory êµ¬ì¡°ì—ì„œ ì½ê¸°/ì“°ê¸° íƒ€ì´ë°ì„ ë§ì¶”ê¸° ìœ„í•œ ê°€ì¥ ì§ê´€ì ì¸ ë°©ì‹.  
íŠ¹íˆ flag ê¸°ë°˜ ì¼ë°©í–¥ êµ¬ì¡°ì—ì„œëŠ” â€œë°ì´í„°ê°€ ì¤€ë¹„ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì½ê¸°â€ ê°™ì€ íë¦„ì„ êµ¬í˜„í•  ë•Œ ì•„ì£¼ ìœ ìš©í•˜ì£ .

## ğŸ§© ê¸°ë³¸ ê°œë…
- Writer: ë°ì´í„°ë¥¼ ì“°ê³  flag = 1ë¡œ ì„¤ì •
- Reader: flag == 1ì´ ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ì½ê³ , flag = 0ìœ¼ë¡œ ì´ˆê¸°í™”
- ëŒ€ê¸° ë£¨í”„: sleep() ë˜ëŠ” poll()ì„ í™œìš©í•´ CPUë¥¼ ê³¼ë„í•˜ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ í•¨

## ğŸ› ï¸ ìƒ˜í”Œ ì½”ë“œ: sleep() ê¸°ë°˜ ëŒ€ê¸° ë£¨í”„
```rust
use std::{fs::File, thread::sleep, time::Duration};
use memmap2::Mmap;
use std::sync::atomic::{AtomicU8, Ordering};

fn main() -> std::io::Result<()> {
    let file = File::open("shared.dat")?;
    let mmap = unsafe { Mmap::map(&file)? };

    loop {
        let flag = mmap[0]; // flag ìœ„ì¹˜ëŠ” 0ë²ˆ ì˜¤í”„ì…‹

        if flag == 1 {
            // ë°ì´í„° ì½ê¸°
            let int_val = i32::from_le_bytes(mmap[1..5].try_into().unwrap());
            let float_val = f64::from_le_bytes(mmap[5..13].try_into().unwrap());

            println!("ì½ì€ ê°’: int = {}, float = {}", int_val, float_val);

            // flag ì´ˆê¸°í™”
            let mmap_mut = unsafe { Mmap::map_mut(&file)? };
            mmap_mut[0] = 0;
            break;
        }

        // ë°ì´í„°ê°€ ì•„ì§ ì—†ìœ¼ë©´ ì ê¹ ëŒ€ê¸°
        sleep(Duration::from_millis(10));
    }

    Ok(())
}

```

## ğŸ§  ì‹¤ë¬´ íŒ

| í•­ëª©        | ì„¤ëª… ë˜ëŠ” ì—­í•                                   |
|-------------|--------------------------------------------------|
| `sleep()`   | ê°„ë‹¨í•œ ëŒ€ê¸° ë£¨í”„ êµ¬í˜„ì— ì‚¬ìš©. CPU ì‚¬ìš©ëŸ‰ ë‚®ì¶¤     |
| `poll()`    | OS ì´ë²¤íŠ¸ ê¸°ë°˜ ëŒ€ê¸° ê°€ëŠ¥. ê³ ê¸‰ IPCì— ì í•©         |
| `AtomicU8`  | `flag`ë¥¼ ì•ˆì „í•˜ê²Œ ì½ê³  ì“°ê¸° ìœ„í•œ ë™ê¸°í™” ë„êµ¬      |
| `Duration`  | `sleep()` ê°„ê²© ì¡°ì ˆ. ë„ˆë¬´ ì§§ìœ¼ë©´ busy-wait ë°œìƒ    |



## âœ… í™•ì¥ ì•„ì´ë””ì–´
- flag = 2 â†’ ì½ëŠ” ì¤‘, 3 â†’ ì—ëŸ¬ ë“±ìœ¼ë¡œ ìƒíƒœë¥¼ ì„¸ë¶„í™”
- loop ëŒ€ì‹  while letì´ë‚˜ matchë¡œ ìƒíƒœ ê´€ë¦¬
- sleep()ì„ ì ì§„ì ìœ¼ë¡œ ëŠ˜ë¦¬ëŠ” exponential backoffë„ ê°€ëŠ¥

