# Process Handling
Rustì—ì„œë„ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ê³  ì¢…ë£Œí•˜ë©°, ì‹œìŠ¤í…œì— ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸í•˜ëŠ” ê¸°ëŠ¥ì„ ì¶©ë¶„íˆ ë‹¤ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ§  1. í”„ë¡œì„¸ìŠ¤ ìƒì„±: std::process::Command
Rustì—ì„œëŠ” Command êµ¬ì¡°ì²´ë¥¼ ì‚¬ìš©í•´ ì™¸ë¶€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŒ.
```rust
use std::process::Command;

fn main() {
    let child = Command::new("echo")
        .arg("Hello, CAD!")
        .spawn()
        .expect("Failed to start process");

    println!("Started process with PID: {}", child.id());
}
```

- spawn()ì€ ë¹„ë™ê¸° ì‹¤í–‰
- output()ì€ ê²°ê³¼ë¥¼ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë°˜í™˜
- status()ëŠ” ì¢…ë£Œ ì½”ë“œë§Œ í™•ì¸

## ğŸ›‘ 2. í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ: Child.kill()
```rust
use std::process::Command;

fn main() {
    let mut child = Command::new("sleep")
        .arg("10")
        .spawn()
        .expect("Failed to start");

    // 2ì´ˆ í›„ ê°•ì œ ì¢…ë£Œ
    std::thread::sleep(std::time::Duration::from_secs(2));
    child.kill().expect("Failed to kill process");
}
```

- kill()ì€ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ë¥¼ ê°•ì œ ì¢…ë£Œ
- wait()ì„ í˜¸ì¶œí•˜ë©´ ì¢…ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

## ğŸ” 3. ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ í™•ì¸ (Linux ê¸°ì¤€)
Rust ìì²´ë¡œëŠ” ì‹œìŠ¤í…œ ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‚˜ì—´í•˜ì§„ ì•Šì§€ë§Œ, ps, pgrep ëª…ë ¹ì–´ë¥¼ í˜¸ì¶œí•´ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”:
```rust
use std::process::Command;

fn main() {
    let output = Command::new("ps")
        .arg("-e")
        .output()
        .expect("Failed to execute ps");

    println!("{}", String::from_utf8_lossy(&output.stdout));
}
```

- ps -e: ì „ì²´ í”„ë¡œì„¸ìŠ¤ ëª©ë¡
- pgrep <name>: íŠ¹ì • ì´ë¦„ì˜ í”„ë¡œì„¸ìŠ¤ PID ê²€ìƒ‰

## ğŸ§  ì‹¤ë¬´ íŒ
| ê¸°ëŠ¥ ë˜ëŠ” ëª©ì              | ì‚¬ìš© ë°©ë²• ë˜ëŠ” API                                |
|----------------------------|----------------------------------------------------|
| í”„ë¡œì„¸ìŠ¤ ìƒì„±              | `Command::new(...).spawn()`                        |
| í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ë˜ëŠ” ëŒ€ê¸°    | `Child.kill()` / `Child.wait()`                   |
| ì‹¤í–‰ ì¤‘ í”„ë¡œì„¸ìŠ¤ ì¡°íšŒ      | `ps`, `pgrep` ëª…ë ¹ì–´ í˜¸ì¶œ â†’ `Command`ë¡œ ì‹¤í–‰       |
| ê²°ê³¼ íŒŒì‹± ë° ì¶œë ¥          | `output.stdout` â†’ `String::from_utf8_lossy(...)`  |


## âœ… 1. Command + wait() + ì±„ë„ ê¸°ë°˜ ë©”ì‹œì§€ ì „ë‹¬
Rustì˜ ìœ¼ë¡œ ì†”ë²„ë¥¼ ì‹¤í–‰í•˜ê³ , ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ” ë°©ì‹ì´ ê°€ì¥ ì§ê´€ì ì…ë‹ˆë‹¤.

### ğŸ› ï¸ ì˜ˆì œ: ì†”ë²„ ì™„ë£Œ í›„ ë©”ì‹œì§€ ì „ë‹¬
```rust
use std::process::Command;
use std::sync::mpsc;
use std::thread;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        let status = Command::new("long_solver")
            .arg("--run")
            .status()
            .expect("Failed to start solver");

        if status.success() {
            tx.send("ì†”ë²„ ì™„ë£Œ!").unwrap();
        } else {
            tx.send("ì†”ë²„ ì‹¤íŒ¨!").unwrap();
        }
    });

    // ë‹¤ë¥¸ ì‘ì—… ìˆ˜í–‰ ì¤‘...
    println!("ë‹¤ë¥¸ ì—…ë¬´ ìˆ˜í–‰ ì¤‘...");

    // ë©”ì‹œì§€ ìˆ˜ì‹ 
    let msg = rx.recv().unwrap();
    println!("ì•Œë¦¼: {}", msg);
}
```

- thread::spawnìœ¼ë¡œ ì†”ë²„ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰
- mpsc::channelë¡œ ë©”ì‹œì§€ë¥¼ ë©”ì¸ ìŠ¤ë ˆë“œì— ì „ë‹¬
- recv()ëŠ” ë¸”ë¡œí‚¹ ë°©ì‹ â†’ ë©”ì‹œì§€ê°€ ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼

## âœ… 2. try_recv() + sleep()ìœ¼ë¡œ ë¹„ë™ê¸° í´ë§
```rust
use std::sync::mpsc;
use std::thread;
use std::time::Duration;

fn main() {
    let (tx, rx) = mpsc::channel();

    thread::spawn(move || {
        // ê¸´ ì‘ì—… ì‹œë®¬ë ˆì´ì…˜
        thread::sleep(Duration::from_secs(5));
        tx.send("ì†”ë²„ ì™„ë£Œ!").unwrap();
    });

    loop {
        match rx.try_recv() {
            Ok(msg) => {
                println!("ì•Œë¦¼: {}", msg);
                break;
            }
            Err(_) => {
                println!("ì†”ë²„ ì§„í–‰ ì¤‘...");
                thread::sleep(Duration::from_secs(1));
            }
        }
    }
}
```

- try_recv()ëŠ” ë©”ì‹œì§€ê°€ ì—†ìœ¼ë©´ ë°”ë¡œ ë°˜í™˜
- sleep()ìœ¼ë¡œ CPU ì‚¬ìš©ëŸ‰ ì¡°ì ˆ
- UIë‚˜ ì½˜ì†”ì—ì„œ ì§„í–‰ ìƒíƒœë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŒ

## âœ… 3. ê³ ê¸‰ ë°©ì‹: OS ì•Œë¦¼, WebSocket, DB íŠ¸ë¦¬ê±° ë“±
- OS ì•Œë¦¼: ë°ìŠ¤í¬íƒ‘ ì•±ì´ë¼ë©´ notify-rust í¬ë ˆì´íŠ¸ë¡œ ì‹œìŠ¤í…œ ì•Œë¦¼ ê°€ëŠ¥
- WebSocket: ì„œë²„-í´ë¼ì´ì–¸íŠ¸ êµ¬ì¡°ë¼ë©´ ì‹¤ì‹œê°„ ë©”ì‹œì§€ í‘¸ì‹œ ê°€ëŠ¥
- íŒŒì¼/DB íŠ¸ë¦¬ê±°: ì†”ë²„ê°€ ê²°ê³¼ íŒŒì¼ì„ ì“°ë©´, ê°ì‹œ í”„ë¡œì„¸ìŠ¤ê°€ ì´ë¥¼ ê°ì§€í•´ ì•Œë¦¼

## ğŸ§  ì‹¤ë¬´ íŒ
| ê¸°ëŠ¥ ë˜ëŠ” ë°©ì‹           | ì„¤ëª… ë˜ëŠ” ì‚¬ìš© ì˜ˆì‹œ                              |
|--------------------------|--------------------------------------------------|
| `mpsc::channel` + `recv()` | ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œì—ì„œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ìˆ˜ì‹  ëŒ€ê¸°     |
| `try_recv()` + `sleep()`   | ë¹„ë™ê¸° í´ë§ ë°©ì‹ìœ¼ë¡œ ìƒíƒœë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸         |
| `notify-rust`             | ë°ìŠ¤í¬íƒ‘ OS ì•Œë¦¼ì„ ë„ì›Œ ì‚¬ìš©ìì—ê²Œ ì¦‰ì‹œ ì „ë‹¬        |
| `flag` ê¸°ë°˜ ê³µìœ  ë©”ëª¨ë¦¬    | ì™¸ë¶€ í”„ë¡œì„¸ìŠ¤ê°€ ìƒíƒœ í”Œë˜ê·¸ë¥¼ ì„¤ì • â†’ ê°ì‹œ í”„ë¡œì„¸ìŠ¤ê°€ ì½ìŒ |

---

# ì™¸ë¶€ í”„ë¡œê·¸ë¨ ì‹¤í–‰í•˜ê¸°
Rustì˜ std::process::Command APIë¥¼ ì‚¬ìš©í•˜ë©´ ì™¸ë¶€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê³ , ì¸ìë¥¼ ì „ë‹¬í•˜ê³ , í‘œì¤€ ì¶œë ¥(stdout)ì„ ìº¡ì²˜í•˜ê³ , 
**ì¢…ë£Œ ì½”ë“œ(return code)** ê¹Œì§€ ë°›ì„ ìˆ˜ ìˆìŒ.

## ğŸ› ï¸ ì˜ˆì œ: Solver.exe ì‹¤í–‰ + stdout ìº¡ì²˜ + ì¢…ë£Œ ì½”ë“œ í™•ì¸
```rust
use std::process::Command;

fn main() {
    let output = Command::new("C:\\Program\\Solver.exe")
        .args(&["data1", "data2", "data3"])
        .output()
        .expect("Solver ì‹¤í–‰ ì‹¤íŒ¨");

    // í‘œì¤€ ì¶œë ¥ ìº¡ì²˜
    let stdout = String::from_utf8_lossy(&output.stdout);
    println!("Solver ì¶œë ¥:\n{}", stdout);

    // ì¢…ë£Œ ì½”ë“œ í™•ì¸
    match output.status.code() {
        Some(0) => println!("Solver ì •ìƒ ì¢…ë£Œ"),
        Some(code) => println!("Solver ì—ëŸ¬ ì¢…ë£Œ (ì½”ë“œ: {})", code),
        None => println!("Solverê°€ ì¢…ë£Œ ì½”ë“œë¥¼ ë°˜í™˜í•˜ì§€ ì•ŠìŒ"),
    }
}
```


## âœ… ì„¤ëª…
ğŸ§  ì‹¤ë¬´ íŒ

| í•­ëª© ë˜ëŠ” API             | ì„¤ëª… ë˜ëŠ” ì˜ˆì‹œ                                   |
|---------------------------|--------------------------------------------------|
| `.args(&[...])`           | ì¸ì ì „ë‹¬ â†’ `["data1", "data2", "data3"]`        |
| `.output()`               | í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ í›„ stdout/stderr ìº¡ì²˜ ë° ì¢…ë£Œ ëŒ€ê¸° |
| `output.stdout`           | í‘œì¤€ ì¶œë ¥ ê²°ê³¼ â†’ `String::from_utf8_lossy(...)` |
| `output.status.code()`    | ì¢…ë£Œ ì½”ë“œ í™•ì¸ â†’ `0`: ì„±ê³µ, ê·¸ ì™¸: ì—ëŸ¬ ì½”ë“œ     |

## ğŸ§  ì‹¤ë¬´ íŒ
| í•­ëª© ë˜ëŠ” API               | ì„¤ëª… ë˜ëŠ” ì‚¬ìš© ì˜ˆì‹œ                                      |
|-----------------------------|----------------------------------------------------------|
| `.args(&["arg1", "arg2", ...])` | ì™¸ë¶€ í”„ë¡œê·¸ë¨ì— ì¸ì ì „ë‹¬ (`data1`, `data2`, `data3`)       |
| `.spawn()` + `Child.wait()`     | ë¹„ë™ê¸° ì‹¤í–‰ í›„ ì¢…ë£Œê¹Œì§€ ê¸°ë‹¤ë¦¼ (ì‹¤ì‹œê°„ ì²˜ë¦¬ì— ì í•©)         |
| `.output().stdout` + `String::from_utf8_lossy` | í‘œì¤€ ì¶œë ¥ ìº¡ì²˜ ë° ë¬¸ìì—´ ë³€í™˜                          |
| `.output().stderr`             | í‘œì¤€ ì—ëŸ¬ ë©”ì‹œì§€ ìº¡ì²˜ (ë””ë²„ê¹… ë° ì˜¤ë¥˜ ì²˜ë¦¬ì— ìœ ìš©)         |

----

# Standard Output / Input

Rustì—ì„œëŠ” ì™¸ë¶€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í‘œì¤€ ì¶œë ¥(stdout)ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŠ¤íŠ¸ë¦¬ë°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 ì¦‰, ì†”ë²„ê°€ ì•„ì§ ì‹¤í–‰ ì¤‘ì´ì–´ë„ ì¶œë ¥ë˜ëŠ” ë‚´ìš©ì„ ì¤„ ë‹¨ìœ„ë¡œ ë°›ì•„ì„œ ë°”ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜ í™”ë©´ì— í‘œì‹œí•  ìˆ˜ ìˆìŒ.

## âœ… í•µì‹¬ ê¸°ìˆ : Command::spawn() + Stdio::piped() + BufReader::lines()
ì´ ì¡°í•©ì„ ì‚¬ìš©í•˜ë©´ í”„ë¡œì„¸ìŠ¤ê°€ ì¶œë ¥í•˜ëŠ” ë‚´ìš©ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì½ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

###  ğŸ› ï¸ ì‹¤ì‹œê°„ ì¶œë ¥ ìŠ¤íŠ¸ë¦¬ë° ì˜ˆì œ
```rust
use std::process::{Command, Stdio};
use std::io::{BufReader, BufRead};

fn main() {
    let mut child = Command::new("C:\\Program\\Solver.exe")
        .args(&["data1", "data2", "data3"])
        .stdout(Stdio::piped())
        .spawn()
        .expect("Solver ì‹¤í–‰ ì‹¤íŒ¨");

    let stdout = child.stdout.take().expect("stdout ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨");
    let reader = BufReader::new(stdout);

    for line in reader.lines() {
        match line {
            Ok(content) => println!("Solver ì¶œë ¥: {}", content),
            Err(e) => eprintln!("ì½ê¸° ì˜¤ë¥˜: {}", e),
        }
    }

    let status = child.wait().expect("Solver ì¢…ë£Œ ëŒ€ê¸° ì‹¤íŒ¨");
    println!("Solver ì¢…ë£Œ ì½”ë“œ: {:?}", status.code());
}
```


## ğŸ§  ì‹¤ë¬´ íŒ

| í•­ëª© ë˜ëŠ” API         | ì„¤ëª… ë˜ëŠ” ì—­í•                                       |
|------------------------|-----------------------------------------------------|
| `Stdio::piped()`       | í‘œì¤€ ì¶œë ¥/ì—ëŸ¬ë¥¼ Rust ì½”ë“œë¡œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ì„¤ì •       |
| `BufReader::lines()`   | ì¶œë ¥ ìŠ¤íŠ¸ë¦¼ì„ ì¤„ ë‹¨ìœ„ë¡œ ì‹¤ì‹œê°„ ì½ê¸° ê°€ëŠ¥               |
| `.spawn()`             | ì™¸ë¶€ í”„ë¡œì„¸ìŠ¤ë¥¼ ë¹„ë™ê¸° ì‹¤í–‰ (ì¦‰ì‹œ ë°˜í™˜ë¨)              |
| `.wait()`              | í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œê¹Œì§€ ëŒ€ê¸° (ì¢…ë£Œ ì½”ë“œ í™•ì¸ ê°€ëŠ¥)           |
| `.stdout.take()`       | `Child` êµ¬ì¡°ì²´ì—ì„œ stdout í•¸ë“¤ì„ ê°€ì ¸ì™€ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬   |


## ğŸ“¦ í™•ì¥ ì•„ì´ë””ì–´
- stderrë„ Stdio::piped()ë¡œ ì„¤ì •í•˜ë©´ ì—ëŸ¬ ë©”ì‹œì§€ë„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì½ì„ ìˆ˜ ìˆì–´ìš”
- ì¶œë ¥ ë‚´ìš©ì„ ë¡œê·¸ íŒŒì¼ì— ì €ì¥í•˜ê±°ë‚˜ UIì— ì‹¤ì‹œê°„ ë°˜ì˜ ê°€ëŠ¥
- ì¶œë ¥ì´ ë„ˆë¬´ ë§ì„ ê²½ìš° BufReader ëŒ€ì‹  io::copy()ë¡œ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬ ê°€ëŠ¥


----

# ğŸ§° Windowsì—ì„œ í”„ë¡œì„¸ìŠ¤ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°

## 1.  í¬ë ˆì´íŠ¸ ì‚¬ìš©
```
# Cargo.toml
[dependencies]
sysinfo = "0.29"
```
```rust
use sysinfo::{System, SystemExt, ProcessExt};

fn main() {
    let mut sys = System::new_all();
    sys.refresh_processes();

    for (pid, process) in sys.processes() {
        println!("PID: {} | Name: {}", pid, process.name());
    }
}
```

- sysinfoëŠ” cross-platform ì§€ì›
- CPU, ë©”ëª¨ë¦¬, ë””ìŠ¤í¬, ë„¤íŠ¸ì›Œí¬ ì •ë³´ë„ í•¨ê»˜ ì¡°íšŒ ê°€ëŠ¥

## 2. Windows API ì§ì ‘ í˜¸ì¶œ (ê³ ê¸‰ ë°©ì‹)
Rustì—ì„œ Windows APIë¥¼ ì§ì ‘ í˜¸ì¶œí•˜ë ¤ë©´ windows í¬ë ˆì´íŠ¸ë¥¼ ì‚¬ìš©í•´ CreateToolhelp32Snapshot, 
Process32First, Process32Nextë¥¼ í˜¸ì¶œí•´ì•¼ í•©ë‹ˆë‹¤. 
ì´ ë°©ì‹ì€ C++ì—ì„œ í•˜ë˜ ê²ƒê³¼ ê±°ì˜ ë™ì¼í•œ íë¦„.

## ğŸ” ì°¸ê³ : PowerShellì—ì„œëŠ” ì´ë ‡ê²Œë„ ê°€ëŠ¥
```
Get-Process | Select-Object Name, Id
```

â†’ Rustì—ì„œ PowerShellì„ í˜¸ì¶œí•´ ê²°ê³¼ë¥¼ íŒŒì‹±í•˜ëŠ” ë°©ì‹ë„ ê°€ëŠ¥í•˜ì§€ë§Œ, sysinfo í¬ë ˆì´íŠ¸ê°€ í›¨ì”¬ ê¹”ë”í•©ë‹ˆë‹¤.

## ğŸ§  ìš”ì•½: Rustì—ì„œ í”„ë¡œì„¸ìŠ¤ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸°

| ë°©ë²• ë˜ëŠ” í¬ë ˆì´íŠ¸     | ì¥ì                           | ë‹¨ì                           | ìš©ë„ ë° íŠ¹ì§•                          |
|------------------------|-------------------------------|-------------------------------|---------------------------------------|
| `sysinfo`              | í¬ë¡œìŠ¤ í”Œë«í¼, ì‚¬ìš© ê°„í¸       | ì„¸ë¶€ ì •ë³´ ì œí•œ ê°€ëŠ¥ì„±         | í”„ë¡œì„¸ìŠ¤ ì´ë¦„, PID, CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë“± |
| Windows API ì§ì ‘ í˜¸ì¶œ | ì„¸ë¶€ ì •ë³´ ì™„ë²½ ì œì–´ ê°€ëŠ¥       | ë³µì¡í•œ unsafe ì½”ë“œ í•„ìš”        | `CreateToolhelp32Snapshot` ë“± ì‚¬ìš©     |
| PowerShell í˜¸ì¶œ        | ë¹ ë¥¸ êµ¬í˜„ ê°€ëŠ¥                 | ì™¸ë¶€ ì˜ì¡´ì„±, íŒŒì‹± í•„ìš”         | `Get-Process` ê²°ê³¼ë¥¼ Rustì—ì„œ íŒŒì‹±     |


---
