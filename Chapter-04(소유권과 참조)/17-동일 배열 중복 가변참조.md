# ë™ì¼ ë°°ì—´ ì¤‘ë³µ ê°€ë³€ ì°¸ì¡°
ë™ì¼ ë°°ì—´ì„ ê°€ë³€ ì°¸ì¡°í•˜ë©´ì„œ ë¶ˆë³€ ì°¸ì¡° í•˜ëŠ” ê²½ìš°ë‚˜ ë‘ë²ˆ ê°€ë³€ ì°¸ì¡°í•˜ëŠ” ê²½ìš° ë¬¸ì œê°€ ë°œìƒí•œë‹¤.

```rust
#[inline] fn sort_pair(a: &mut f32, b: &mut f32) {
    if *a > *b {
        core::mem::swap(a, b);
    }
}

let mut isect1 = [0.0f32;2];
let mut isect2 = [0.0f32;2];
sort_pair(&mut isect1[0], &mut isect1[1]);
```   
```
    |
357 |     sort_pair(&mut isect1[0], &mut isect1[1]);
    |     --------- --------------  ^^^^^^^^^^^^^^ second mutable borrow occurs here
    |     |         |
    |     |         first mutable borrow occurs here
    |     first borrow later used by call
```    


## ğŸ§  ì—ëŸ¬ì˜ ë³¸ì§ˆ
```rust
sort_pair(&mut isect1[0], &mut isect1[1]);
```

- isect1ì€ [f32; 2] íƒ€ì…ì˜ ë°°ì—´
- &mut isect1[0]ì„ ë¨¼ì € ë¹Œë¦¼ â†’ ì²« ë²ˆì§¸ ê°€ë³€ ì°¸ì¡° ë°œìƒ
- ê·¸ ìƒíƒœì—ì„œ &mut isect1[1]ì„ ë˜ ë¹Œë¦¬ë©´ â†’ ê°™ì€ ë°°ì—´ì„ ë‘ ë²ˆ ê°€ë³€ ì°¸ì¡°í•˜ë ¤ëŠ” ì‹œë„
- RustëŠ” ë™ì¼í•œ ë©”ëª¨ë¦¬ ë¸”ë¡ì— ëŒ€í•´ ë™ì‹œì— ì—¬ëŸ¬ ê°€ë³€ ì°¸ì¡°ë¥¼ í—ˆìš©í•˜ì§€ ì•ŠìŒ
- ê·¸ë˜ì„œ E0499: second mutable borrow occurs here ì—ëŸ¬ê°€ ë°œìƒ

## âœ… í•´ê²° ë°©ë²•: `split_at_mut()` ì‚¬ìš©
RustëŠ” ì´ëŸ° ìƒí™©ì„ ìœ„í•´ ì•ˆì „í•œ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.  
ë°°ì—´ì„ ë‘ ê°œì˜ ë¹„ì¤‘ì²© ê°€ë³€ ìŠ¬ë¼ì´ìŠ¤ë¡œ ë‚˜ëˆ„ëŠ” `split_at_mut()` ë¥¼ ì‚¬ìš©í•˜ë©´ í•´ê²°:

```rust
let (a, b) = isect1.split_at_mut(1);
sort_pair(&mut a[0], &mut b[0]);
```

- split_at_mut(1)ì€ [0]ê³¼ [1]ì„ ì„œë¡œ ê²¹ì¹˜ì§€ ì•ŠëŠ” ë‘ ìŠ¬ë¼ì´ìŠ¤ë¡œ ë‚˜ëˆ”
- ì´ì œ a[0]ê³¼ b[0]ì€ ì„œë¡œ ë‹¤ë¥¸ ìŠ¬ë¼ì´ìŠ¤ì˜ ìš”ì†Œì´ë¯€ë¡œ ë™ì‹œì— ê°€ë³€ ì°¸ì¡° ê°€ëŠ¥

## í•´ê²°ëœ ì‹¤ì œ ì½”ë“œ
```rust
    let (a, b) = isect1.split_at_mut(1);
    let (c, d) = isect2.split_at_mut(1);

    sort_pair(&mut a[0], &mut b[0]);
    sort_pair(&mut c[0], &mut d[0]);

    !(isect1[1] < isect2[0] || isect2[1] < isect1[0])
```

## âœ¨ ìš”ì•½
| ìƒí™©                         | í•´ê²° ë°©ë²•         | ì„¤ëª…                                                 |
|------------------------------|-------------------|--------------------------------------------------------|
| ë™ì¼ ë°°ì—´ ìš”ì†Œì— ì¤‘ë³µ ê°€ë³€ ì°¸ì¡° | `split_at_mut()`  | ë°°ì—´ì„ ê²¹ì¹˜ì§€ ì•ŠëŠ” ë‘ ìŠ¬ë¼ì´ìŠ¤ë¡œ ë‚˜ëˆ  ì•ˆì „í•˜ê²Œ ê°€ë³€ ì°¸ì¡°ë¥¼ ì–»ìŒ |


--- 

# `split_at_mut()` ìƒì„¸

split_at_mut()ëŠ” Rustì—ì„œ ê°€ë³€ ìŠ¬ë¼ì´ìŠ¤ë¥¼ ì•ˆì „í•˜ê²Œ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ë©”ì„œë“œ.  
ì´ ë©”ì„œë“œëŠ” ì¤‘ì²©ëœ ê°€ë³€ ì°¸ì¡°ë¥¼ í”¼í•˜ë©´ì„œ ë™ì¼í•œ ìŠ¬ë¼ì´ìŠ¤ì˜ ì„œë¡œ ë‹¤ë¥¸ ë¶€ë¶„ì„ ë™ì‹œì— ìˆ˜ì •í•  ìˆ˜ ìˆìŒ.

## ğŸ§  ì˜ë¯¸ì™€ ì •ì˜
```rust
fn split_at_mut(&mut self, mid: usize) -> (&mut [T], &mut [T])
```

- self: &mut [T] íƒ€ì…ì˜ ê°€ë³€ ìŠ¬ë¼ì´ìŠ¤
- mid: ë‚˜ëˆŒ ê¸°ì¤€ ì¸ë±ìŠ¤
- ë°˜í™˜ê°’: ë‘ ê°œì˜ ê²¹ì¹˜ì§€ ì•ŠëŠ” ê°€ë³€ ìŠ¬ë¼ì´ìŠ¤ (&mut [T], &mut [T])
ì¦‰, split_at_mut(n)ì€ ìŠ¬ë¼ì´ìŠ¤ë¥¼ [0..n]ê³¼ [n..]ìœ¼ë¡œ ë‚˜ëˆ ì„œ  
ë™ì‹œì— ê°€ë³€ ì°¸ì¡°ë¥¼ ì–»ì„ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì•ˆì „í•œ ë°©ë²•.  

## âœ… ì˜ˆì œ
```rust
let mut data = [1, 2, 3, 4, 5];
let (left, right) = data.split_at_mut(2);

left[0] = 10;
right[0] = 99;

assert_eq!(data, [10, 2, 99, 4, 5]);
```

leftëŠ” `[1, 2]`, rightëŠ” `[3, 4, 5]`  
ì„œë¡œ ê²¹ì¹˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Rustê°€ ë™ì‹œ ê°€ë³€ ì°¸ì¡°ë¥¼ í—ˆìš©í•¨


## ğŸ”’ ì™œ ì¤‘ìš”í•œê°€?
RustëŠ” ë©”ëª¨ë¦¬ ì•ˆì „ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´  
ë™ì¼í•œ ìŠ¬ë¼ì´ìŠ¤ì—ì„œ ì¤‘ì²©ëœ ê°€ë³€ ì°¸ì¡°ë¥¼ ê¸ˆì§€.  
split_at_mut()ëŠ” ì´ ì œí•œì„ ì•ˆì „í•˜ê²Œ ìš°íšŒí•  ìˆ˜ ìˆëŠ” ë„êµ¬.  

## âœ¨ ìš”ì•½
| ìƒí™© ë˜ëŠ” ê¸°ëŠ¥             | ë°˜í™˜ íƒ€ì…             | ì„¤ëª…                                                                 |
|----------------------------|------------------------|----------------------------------------------------------------------|
| ìŠ¬ë¼ì´ìŠ¤ë¥¼ ë‘ ë¶€ë¶„ìœ¼ë¡œ ë¶„í•  | `(&mut [T], &mut [T])` | ê²¹ì¹˜ì§€ ì•ŠëŠ” ë‘ ê°€ë³€ ìŠ¬ë¼ì´ìŠ¤ë¥¼ ë°˜í™˜í•˜ì—¬ ë™ì‹œì— ì•ˆì „í•˜ê²Œ ìˆ˜ì • ê°€ëŠ¥     |

ì´ ë©”ì„œë“œëŠ” íŠ¹íˆ ì •ë ¬, ë¹„êµ, ë³‘í•© ê°™ì€ ì•Œê³ ë¦¬ì¦˜ì—ì„œ  
ë°°ì—´ì˜ ë‘ ìš”ì†Œë¥¼ ë™ì‹œì— ìˆ˜ì •í•´ì•¼ í•  ë•Œ ì•„ì£¼ ìœ ìš©.


--- 
# ë‹¤ë¥¸ í•´ê²° ë°©ë²•

## 1) ì§€ê¸ˆì²˜ëŸ¼ split_at_mut (OK)
```rust
let (a, b) = isect1.split_at_mut(1);
let (c, d) = isect2.split_at_mut(1);

sort_pair(&mut a[0], &mut b[0]);
sort_pair(&mut c[0], &mut d[0]);
```

## 2) ë” ê°„ë‹¨íˆ: `swap` ìœ¼ë¡œ ì •ë ¬ (ë§¤í¬ë¡œ/í•¨ìˆ˜ ì—†ì´)
```rust
if isect1[0] > isect1[1] { isect1.swap(0, 1); }
if isect2[0] > isect2[1] { isect2.swap(0, 1); }
```
â†’ ë‘ ì›ì†Œë§Œ ì •ë ¬í•  ë• ì´ê²Œ ì œì¼ ê¹”ë”í•˜ê³  borrow ë¬¸ì œ ì—†ìŒ.  

### ë˜ëŠ” helperë¡œ:

```rust
#[inline]
fn sort2(a: &mut [f32; 2]) {
    if a[0] > a[1] { a.swap(0, 1); }
}

// ì‚¬ìš©
sort2(&mut isect1);
sort2(&mut isect2);
```


## 3) `ë°°ì—´ íŒ¨í„´ ë¶„í•´` ë¡œ ë‘ ì°¸ì¡° ë§Œë“¤ê¸°
```rust
let [ref mut a0, ref mut a1] = isect1;
let [ref mut b0, ref mut b1] = isect2;
sort_pair(a0, a1);
sort_pair(b0, b1);
```
- íŒ¨í„´ ë¶„í•´ëŠ” ìš”ì†Œê°€ ì„œë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ì„ì„ ì»´íŒŒì¼ëŸ¬ê°€ ì•Œ ìˆ˜ ìˆì–´ì„œ ì•ˆì „.

---




