## ê¸°í•˜ í”¼íŒ…ê³¼ MLì˜ ê´€ê³„

- Raw Sensor Data (LiDAR, Radar, Camera)
â†“
- Geometric Fitting (Plane, Line, Circle, Curve) â†’ ë°ì´í„° êµ¬ì¡°í™”
â†“
- Feature Extraction (Normals, Curvature, Radius, Orientation) â†’ ML ì…ë ¥ íŠ¹ì§• ìƒì„±
â†“
- Machine Learning Model (SVM, RandomForest, PointNet ë“±) â†’ í•™ìŠµ/ì¶”ë¡ 
â†“
- Output (Classification, Detection, Tracking) â†’ ê²°ê³¼ ë„ì¶œ


í¬ì¸íŠ¸ í´ë¼ìš°ë“œ ë°ì´í„°ë¥¼ **ìë™ìœ¼ë¡œ ê·¸ë£¹í™”(í´ëŸ¬ìŠ¤í„°ë§)** í•´ì„œ,  
ì˜ˆë¥¼ ë“¤ì–´ **ì´ê±´ ë°”ë‹¥ ì ë“¤, ì´ê±´ ë²½ ì ë“¤** ì²˜ëŸ¼ ë°ì´í„° êµ¬ì¡°ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ğŸ“Œ ê°œë… íë¦„
- PointCloudì—ì„œ ì ë“¤ì„ ê°€ì ¸ì˜¤ê¸° â†’ Vec<Point3D>
- ì ë“¤ì„ ë²¡í„°/í–‰ë ¬ë¡œ ë³€í™˜ â†’ ML ì•Œê³ ë¦¬ì¦˜ ì…ë ¥
- KMeans ì‹¤í–‰ â†’ ê° ì ì´ ì†í•œ í´ëŸ¬ìŠ¤í„° ë¼ë²¨ ë°˜í™˜
- ê²°ê³¼ë¥¼ ë‹¤ì‹œ PointCloudì™€ ì—°ê²° â†’ í´ëŸ¬ìŠ¤í„°ë³„ë¡œ ìƒ‰ì¹ í•˜ê±°ë‚˜ ë¶„ë¦¬ ê°€ëŠ¥
```rust
impl PointCloud {
    /// KMeans í´ëŸ¬ìŠ¤í„°ë§ ì‹¤í–‰
    pub fn kmeans_cluster(&self, k: usize) -> Vec<usize> {
        let pts = self.points();

        // ndarray ë¡œ ë³€í™˜: [n_points, 3]
        let mut data = Array2::<f64>::zeros((pts.len(), 3));
        for (i, p) in pts.iter().enumerate() {
            data[[i, 0]] = p.x;
            data[[i, 1]] = p.y;
            data[[i, 2]] = p.z;
        }

        // DatasetBase ë¡œ ê°ì‹¸ê¸° (ë¼ë²¨ì€ ì—†ìŒ â†’ ())
        let dataset = DatasetBase::from(data);

        // KMeans ì‹¤í–‰
        let model = KMeans::params(k)
            .fit(&dataset)
            .expect("KMeans failed");

        let labels = model.predict(&dataset);
        labels.to_vec()
    }
}
```

## ğŸ“Œ ê°œë… íë¦„
- PointCloudì—ì„œ ì ë“¤ì„ ê°€ì ¸ì˜¤ê¸° â†’ Vec<Point3D>
- ì ë“¤ì„ ë²¡í„°/í–‰ë ¬ë¡œ ë³€í™˜ â†’ ML ì•Œê³ ë¦¬ì¦˜ ì…ë ¥
- KMeans ì‹¤í–‰ â†’ ê° ì ì´ ì†í•œ í´ëŸ¬ìŠ¤í„° ë¼ë²¨ ë°˜í™˜
- ê²°ê³¼ë¥¼ ë‹¤ì‹œ PointCloudì™€ ì—°ê²° â†’ í´ëŸ¬ìŠ¤í„°ë³„ë¡œ ìƒ‰ì¹ í•˜ê±°ë‚˜ ë¶„ë¦¬ ê°€ëŠ¥


## ğŸ¦€ Rust ì½”ë“œ ì˜ˆì œ (linfa ì‚¬ìš©)
Cargo.tomlì— ML ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€:
```
[dependencies]
linfa = "0.7"          # ML í”„ë ˆì„ì›Œí¬
linfa-clustering = "0.7" # KMeans ì•Œê³ ë¦¬ì¦˜
```

## âœ… ê²°ê³¼
- ê° ì ë§ˆë‹¤ labels[i] ê°’ì´ í´ëŸ¬ìŠ¤í„° ë²ˆí˜¸(0, 1, â€¦)ë¡œ ë°˜í™˜ë©ë‹ˆë‹¤.
- ì´ë¥¼ ì´ìš©í•´ í´ëŸ¬ìŠ¤í„°ë³„ë¡œ ìƒ‰ì¹ , ë¶„ë¦¬, ë¶„ì„ ê°€ëŠ¥.
- ì˜ˆ: ë°”ë‹¥/ë²½/ì²œì¥ ìë™ ë¶„ë¦¬, ê°ì²´ íƒì§€ ì „ì²˜ë¦¬.

## ğŸ”® í™•ì¥ ì•„ì´ë””ì–´
- KMeans ëŒ€ì‹  DBSCANì„ ì“°ë©´ ë°€ë„ ê¸°ë°˜ í´ëŸ¬ìŠ¤í„°ë§ ê°€ëŠ¥ â†’ ì¡ìŒ(outlier) ìë™ ì œê±°.
- í´ëŸ¬ìŠ¤í„°ë³„ë¡œ RANSAC í‰ë©´ í”¼íŒ…ì„ ì ìš©í•˜ë©´ â€œì—¬ëŸ¬ ê°œì˜ í‰ë©´â€ì„ ìë™ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ìˆìŒ.
- ì¶”í›„ AI ëª¨ë¸(PointNet ë“±)ì— í´ëŸ¬ìŠ¤í„°ë³„ íŠ¹ì§•ì„ ì…ë ¥í•˜ë©´ ì„±ëŠ¥ í–¥ìƒ.


## ğŸ§ª í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ˆì œ
```rust
#[cfg(test)]
mod tests {
    use super::*;
    use rand::Rng;

    #[test]
    fn test_kmeans_clustering_on_pointcloud() {
        let mut rng = rand::thread_rng();
        let mut points = Vec::new();

        // í´ëŸ¬ìŠ¤í„° 1: (0,0,0) ê·¼ì²˜
        for _ in 0..50 {
            points.push(Point3D::new(
                rng.gen_range(-0.5..0.5),
                rng.gen_range(-0.5..0.5),
                rng.gen_range(-0.5..0.5),
            ));
        }

        // í´ëŸ¬ìŠ¤í„° 2: (10,10,10) ê·¼ì²˜
        for _ in 0..50 {
            points.push(Point3D::new(
                10.0 + rng.gen_range(-0.5..0.5),
                10.0 + rng.gen_range(-0.5..0.5),
                10.0 + rng.gen_range(-0.5..0.5),
            ));
        }

        let pc = PointCloud::from_vec(points);
        let labels = pc.kmeans_cluster(2);

        // ë¼ë²¨ ê°œìˆ˜ëŠ” í¬ì¸íŠ¸ ê°œìˆ˜ì™€ ê°™ì•„ì•¼ í•¨
        assert_eq!(labels.len(), pc.len());

        // ë‘ í´ëŸ¬ìŠ¤í„°ê°€ ì˜ ë¶„ë¦¬ë˜ì—ˆëŠ”ì§€ í™•ì¸
        let cluster1_count = labels.iter().filter(|&&l| l == 0).count();
        let cluster2_count = labels.iter().filter(|&&l| l == 1).count();

        println!("Cluster 0 count: {}", cluster1_count);
        println!("Cluster 1 count: {}", cluster2_count);

        assert!(cluster1_count > 40, "ì²« ë²ˆì§¸ í´ëŸ¬ìŠ¤í„°ê°€ ì œëŒ€ë¡œ ë¶„ë¦¬ë˜ì§€ ì•ŠìŒ");
        assert!(cluster2_count > 40, "ë‘ ë²ˆì§¸ í´ëŸ¬ìŠ¤í„°ê°€ ì œëŒ€ë¡œ ë¶„ë¦¬ë˜ì§€ ì•ŠìŒ");
    }
}
```
## âœ… í…ŒìŠ¤íŠ¸ í¬ì¸íŠ¸
- labels.len() == pc.len() â†’ ëª¨ë“  ì ì— í´ëŸ¬ìŠ¤í„° ë¼ë²¨ì´ í• ë‹¹ë˜ì—ˆëŠ”ì§€ í™•ì¸.
- cluster1_count > 40, cluster2_count > 40 â†’ ë‘ ê·¸ë£¹ì´ ì˜¬ë°”ë¥´ê²Œ ë¶„ë¦¬ë˜ì—ˆëŠ”ì§€ ê²€ì¦.
- println!ìœ¼ë¡œ ì‹¤ì œ ë¼ë²¨ ë¶„í¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ.


![Point Cloud Kmeans Cloud 2D](/image/point_cloud_kmeans_cluster_2d.png)



## ğŸ§ª í…ŒìŠ¤íŠ¸ì˜ í•µì‹¬ ì˜ë¯¸
- ë¼ë²¨ ê°œìˆ˜ ê²€ì¦: ëª¨ë“  ì ì— í´ëŸ¬ìŠ¤í„° ë¼ë²¨ì´ ë¶™ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
- ë¶„ë¦¬ ì •í™•ë„ ê²€ì¦: ë‘ ê·¸ë£¹ì´ ê°ê° 40ê°œ ì´ìƒ ì ì„ í¬í•¨í•˜ë©´, KMeansê°€ ì œëŒ€ë¡œ ë¶„ë¦¬í–ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì‹¤ì œ í™œìš©: ì´ëŸ° ë°©ì‹ìœ¼ë¡œ í¬ì¸íŠ¸ í´ë¼ìš°ë“œ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ê·¸ë£¹í™”í•˜ë©´, ë°”ë‹¥/ë²½/ì²œì¥ ê°™ì€ êµ¬ì¡°ë¥¼ ìë™ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“Š í¬ì¸íŠ¸ í´ë¼ìš°ë“œ ê·¸ë¦¼
ì•„ë˜ ê·¸ë¦¼ì€ ë‘ í´ëŸ¬ìŠ¤í„°ë¥¼ ì‹œê°í™”í•œ 3D ì‚°ì ë„ì…ë‹ˆë‹¤.
- íŒŒë€ìƒ‰: (0,0,0) ê·¼ì²˜ í´ëŸ¬ìŠ¤í„°
- ë¹¨ê°„ìƒ‰: (10,10,10) ê·¼ì²˜ í´ëŸ¬ìŠ¤í„°
- ê° ì ì€ KMeansê°€ ìë™ìœ¼ë¡œ ë¼ë²¨ë§í•œ ê²°ê³¼ë¥¼ ìƒ‰ìƒìœ¼ë¡œ í‘œí˜„í–ˆìŠµë‹ˆë‹¤.

![Point Cloud Kmeans Cloud 2D](/image/point_cloud_kmeans_cluster_3d.png)


---






