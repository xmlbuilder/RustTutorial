# #[repr(C)]
Rust에서 메모리 레이아웃을 C 언어 스타일로 고정하겠다는 뜻.
이 속성은 구조체나 열거형(enum)에 붙여서 필드의 순서와 정렬 방식을 C와 호환되도록 강제.

## 🧠 #[repr(C)]의 의미
#[repr(C)]
struct MyStruct {
    a: u8,
    b: u32,
}

- Rust는 기본적으로 #[repr(Rust)]라는 최적화된 레이아웃을 사용해서 필드 순서를 바꾸거나 패딩을 삽입할 수 있어요
- 하지만 #[repr(C)]를 붙이면 정의된 순서 그대로 메모리에 배치되고, C 언어와의 **FFI (Foreign Function Interface)**에서 안전하게 사용할 수 있게 돼요

## ✨ 언제 사용하나요?
| 사용 상황               | 이유 또는 목적                                  | 설명                                                                 |
|------------------------|-----------------------------------------------|----------------------------------------------------------------------|
| C와 FFI 연동            | C 코드와 구조체를 안전하게 공유하기 위해       | Rust와 C가 동일한 메모리 레이아웃을 사용해야 데이터가 깨지지 않음     |
| 바이너리 포맷 처리      | 정확한 바이트 순서가 필요한 경우               | 네트워크 패킷, 파일 포맷 등에서 구조체의 바이트 배치가 중요함         |
| unsafe 포인터 연산      | 메모리 오프셋을 예측 가능하게 만들기 위해     | 구조체의 필드 위치를 정확히 알아야 할 때 사용                         |
| 시스템 프로그래밍       | 하드웨어나 OS 인터페이스와 직접 연결할 때     | 레지스터 맵, 커널 구조체 등


## ⚠️ 주의할 점
- #[repr(C)]는 필드 순서를 고정하지만, 여전히 패딩이 삽입될 수 있음
- 구조체 크기나 정렬을 정확히 제어하려면 #[repr(C, packed)] 또는 #[repr(align(N))] 같은 속성과 함께 써야 함
- Rust의 안전성은 유지되지만, FFI에서는 unsafe 코드가 자주 등장하므로 신중하게 사용해야 함

## 🔍 관련 속성 비교
| 속성             | 설명                                                                 |
|------------------|----------------------------------------------------------------------|
| `#[repr(Rust)]`  | 기본값. 컴파일러가 최적화된 레이아웃을 자유롭게 결정함               |
| `#[repr(C)]`     | C 언어와 호환되는 레이아웃. 필드 순서 고정                           |
| `#[repr(packed)]`| 패딩 없이 메모리 배치. 정렬이 깨질 수 있어 위험함                    |
| `#[repr(align(N))`| 최소 정렬 크기를 지정. 캐시 최적화나 SIMD 등에 사용됨               |

## 요약
#[repr(C)]는 Rust 구조체를 C 스타일로 메모리에 배치해서
다른 언어와 안전하게 데이터를 주고받거나, 메모리 구조를 예측 가능하게 만들기 위한 도구예요.
