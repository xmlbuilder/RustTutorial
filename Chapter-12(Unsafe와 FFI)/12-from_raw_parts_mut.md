## from_raw_parts_mut
- Rustì—ì„œ ê°€ì¥ ê°•ë ¥í•˜ë©´ì„œë„ ê°€ì¥ ìœ„í—˜í•œ í•¨ìˆ˜ ì¤‘ í•˜ë‚˜.

### ğŸŸ¥ 1) from_raw_parts_mutê°€ í•˜ëŠ” ì¼ (í•µì‹¬ ìš”ì•½)
- **ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œ(ptr) + ê¸¸ì´(len)ë¥¼ ê°€ì§€ê³  ìƒˆë¡œìš´ &mut [T] ìŠ¬ë¼ì´ìŠ¤ë¥¼ ë§Œë“ ë‹¤.**
- ì¦‰, Rustê°€ ì›ë˜ ê°€ì§€ê³  ìˆë˜ borrow ì •ë³´ë¥¼ ë¬´ì‹œí•˜ê³   
    ê°œë°œìê°€ ì§ì ‘ â€˜ì´ ë©”ëª¨ë¦¬ëŠ” ë‚´ê°€ ì±…ì„ì§„ë‹¤â€™ê³  ì„ ì–¸í•˜ëŠ” ê²ƒ.
- ê·¸ë˜ì„œ ì´ í•¨ìˆ˜ëŠ” 100% unsafeë‹¤.

### ğŸŸ¥ 2) í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜
```rust
pub unsafe fn from_raw_parts_mut<'a, T>(data: *mut T, len: usize) -> &'a mut [T]
```

- ì´ê²Œ ì˜ë¯¸í•˜ëŠ” ê±´:
    - data: T íƒ€ì… ìš”ì†Œê°€ ìˆëŠ” ë©”ëª¨ë¦¬ì˜ ì‹œì‘ ì£¼ì†Œ
    - len: ìš”ì†Œ ê°œìˆ˜
    - ë°˜í™˜ê°’: ê·¸ ì£¼ì†Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ &mut [T] ìŠ¬ë¼ì´ìŠ¤
- ì¦‰, Rustì—ê²Œ:
    - **ì—¬ê¸° ë©”ëª¨ë¦¬ë¥¼ ê¸¸ì´ lenì§œë¦¬ ê°€ë³€ ìŠ¬ë¼ì´ìŠ¤ë¡œ ì·¨ê¸‰ ìš”ì²­.**
- ë¼ê³  ê°•ì œë¡œ ì•Œë ¤ì£¼ëŠ” ê±°ì•¼.

### ğŸŸ¥ 3) ì™œ ìœ„í—˜í•œê°€? (Rustì˜ aliasing ê·œì¹™ê³¼ ì¶©ëŒ)
- RustëŠ” ë‹¤ìŒì„ ì ˆëŒ€ í—ˆìš©í•˜ì§€ ì•Šì•„.
    - âœ” ê°™ì€ ë©”ëª¨ë¦¬ êµ¬ê°„ì— ëŒ€í•œ ë‘ ê°œì˜ &mut
    - âœ” aliasing + mutable
    - âœ” lifetimeì´ ê²¹ì¹˜ëŠ” mut slice
- ê·¸ëŸ°ë° from_raw_parts_mutëŠ” ì´ ê·œì¹™ì„ ì™„ì „íˆ ìš°íšŒí•œë‹¤.
- ì˜ˆë¥¼ ë“¤ì–´:
```rust
let ptr = slice.as_mut_ptr();
let len = slice.len();

let a = unsafe { from_raw_parts_mut(ptr, len) };
let b = unsafe { from_raw_parts_mut(ptr, len) };
```

- ì´ëŸ¬ë©´ Rust ì…ì¥ì—ì„œëŠ”:
    - aì™€ bëŠ” ì„œë¡œ ë‹¤ë¥¸ &mut [T]
    - í•˜ì§€ë§Œ ì‹¤ì œë¡œëŠ” ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ê°€ë¦¬í‚´
    - Rustì˜ aliasing ê·œì¹™ ì™„ì „ ìœ„ë°˜
    - ì´ê±´ UB(Undefined Behavior)
- ê·¸ë˜ì„œ ì´ í•¨ìˆ˜ëŠ” ê°œë°œìê°€ ì§ì ‘ aliasing ì•ˆì „ì„±ì„ ì¦ëª…í•´ì•¼ í•œë‹¤.

### ğŸŸ¥ 4) ê·¸ëŸ¼ ì™œ ì´ ì½”ë“œì—ì„œëŠ” from_raw_parts_mutë¥¼ ì¨ë„ ì•ˆì „í•œê°€?
- ì½”ë“œ(ì •í™•íˆëŠ” AIê°€ êµ¬í˜„í•œ ì½”ë“œ)ëŠ” ì´ë ‡ê²Œ ë˜ì–´ ìˆìŒ:
```rust
let mk = |offset: usize, sub_cols: usize| MatrixBlockMut {
    data: unsafe { std::slice::from_raw_parts_mut(ptr, len) },
    rows,
    cols: sub_cols,
    row_stride: stride,
    offset,
};
```

- ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€:
- âœ” ë‘ block viewëŠ” ê°™ì€ ìŠ¬ë¼ì´ìŠ¤ë¥¼ ê³µìœ í•˜ì§€ë§Œ
- âœ” ì‹¤ì œë¡œ ì ‘ê·¼í•˜ëŠ” ì¸ë±ìŠ¤ëŠ” ì ˆëŒ€ ê²¹ì¹˜ì§€ ì•ŠëŠ”ë‹¤
- ì™œëƒë©´:
    - left block â†’ ì—´ [0 .. col)
    - right block â†’ ì—´ [col .. cols)
    - offset + strideë¡œ ì¸ë±ìŠ¤ë¥¼ ê³„ì‚°
    - ë‘ blockì´ ì ‘ê·¼í•˜ëŠ” index ë²”ìœ„ê°€ ë…¼ë¦¬ì ìœ¼ë¡œ disjoint
- ì¦‰, RustëŠ” aliasingì„ ì¦ëª…í•  ìˆ˜ ì—†ì§€ë§Œ ì„¤ê³„ê°€ aliasingì´ ì—†ìŒì„ ë³´ì¥í•œë‹¤.
- ê·¸ë˜ì„œ ì´ unsafeëŠ” **ì •ë‹¹í•œ unsafe**.

### ğŸŸ¥ 5) Rustê°€ ì™œ ì´ê±¸ ìë™ìœ¼ë¡œ ëª» í•´ì£¼ë‚˜?
- Rust borrow checkerëŠ” ë©”ëª¨ë¦¬ì˜ ì‹¤ì œ ì¸ë±ìŠ¤ ê³„ì‚°ì„ ì´í•´í•˜ì§€ ëª»í•¨.
- ì˜ˆë¥¼ ë“¤ì–´:
```rust
&mut data[0..10]
&mut data[10..20]
```

- ì´ê±´ safe.
- í•˜ì§€ë§Œ:
```rust
&mut data[0..100]  // ì „ì²´ ìŠ¬ë¼ì´ìŠ¤
â†’ offset + strideë¡œ ë…¼ë¦¬ì  ë¶„í• 
```

- ì´ê±´ Rustê°€ â€œì´ ë‘˜ì´ ê²¹ì¹˜ì§€ ì•ŠëŠ”ë‹¤â€ëŠ” ê±¸ ì¦ëª…í•  ìˆ˜ ì—†ìŒ.
- ê·¸ë˜ì„œ RustëŠ”:
    - í–‰ split (split_at_mut) â†’ ì•ˆì „
    - ì—´ split (stride ê¸°ë°˜) â†’ unsafe í•„ìš”
- ì´ ì°¨ì´ê°€ ìƒê¸°ëŠ” ê²ƒì„.

### ğŸŸ¥ 6) from_raw_parts_mutë¥¼ ì‚¬ìš©í•  ë•Œ ë°˜ë“œì‹œ ì§€ì¼œì•¼ í•˜ëŠ” ê·œì¹™
- ì´ í•¨ìˆ˜ëŠ” ë‹¤ìŒì„ ê°œë°œìê°€ ì§ì ‘ ë³´ì¥í•´ì•¼ í•œë‹¤.
    - âœ” 1) ptrì´ ìœ íš¨í•œ ë©”ëª¨ë¦¬ë¥¼ ê°€ë¦¬ì¼œì•¼ í•œë‹¤
    - âœ” 2) ptrë¶€í„° lenê°œ ìš”ì†Œê°€ ëª¨ë‘ ìœ íš¨í•´ì•¼ í•œë‹¤
    - âœ” 3) ê·¸ ë©”ëª¨ë¦¬ëŠ” T íƒ€ì…ìœ¼ë¡œ ì •ë ¬ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤
    - âœ” 4) ê·¸ ë©”ëª¨ë¦¬ëŠ” í˜„ì¬ ë‹¤ë¥¸ &mutë¡œ aliasingë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤
    - âœ” 5) lifetime 'a ë™ì•ˆ ê·¸ ë©”ëª¨ë¦¬ëŠ” ì‚´ì•„ ìˆì–´ì•¼ í•œë‹¤
- ì´ ì¤‘ í•˜ë‚˜ë¼ë„ ì–´ê¸°ë©´ UBë‹¤.
- ì½”ë“œì—ì„œëŠ”:
    - ptr = self.data.as_mut_ptr() â†’ ìœ íš¨
    - len = self.data.len() â†’ ì •í™•
    - T = f64 â†’ ì •ë ¬ ë¬¸ì œ ì—†ìŒ
    - aliasingì€ offset/strideë¡œ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬
    - lifetimeì€ MatrixSliceMutì´ ì‚´ì•„ ìˆëŠ” ë™ì•ˆë§Œ blockì´ ì¡´ì¬
- ì¦‰, ëª¨ë“  ì¡°ê±´ì„ ë§Œì¡±í•œë‹¤.

### ğŸŸ¥ 7) ì™œ ì´ íŒ¨í„´ì´ Rustì—ì„œ â€œì •ì„â€ì¸ê°€?
- Rustì—ì„œ í–‰ë ¬/ì´ë¯¸ì§€/ì‹œê·¸ë„ ì²˜ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì€ ê±°ì˜ ëª¨ë‘ ì´ íŒ¨í„´ì„ ì“´ë‹¤.
- ì˜ˆ:
    - ndarray
    - nalgebra
    - image crate
    - BLAS/LAPACK binding
    - GPU buffer view
- ì´ìœ ëŠ” ê°„ë‹¨.
    - âœ” RustëŠ” stride ê¸°ë°˜ ë¶„í• ì„ ìë™ìœ¼ë¡œ ì¦ëª…í•  ìˆ˜ ì—†ë‹¤
    - âœ” í•˜ì§€ë§Œ ìˆ˜í•™ì ìœ¼ë¡œëŠ” ì•ˆì „í•˜ë‹¤
    - âœ” ê·¸ë˜ì„œ unsafeë¥¼ ìº¡ìŠí™”í•˜ê³  safe APIë¥¼ ì œê³µí•œë‹¤
- ì½”ë“œë„ ì •í™•íˆ ì´ íŒ¨í„´ì„ ë”°ë¥¸ë‹¤.

### ğŸŸ© ê²°ë¡ :
- from_raw_parts_mutëŠ” Rustì—ì„œ **ë©”ëª¨ë¦¬ ëª¨ë¸ì„ ì§ì ‘ ì±…ì„ì§€ëŠ” ê°œë°œìë§Œ ì¨ì•¼ í•˜ëŠ” í•¨ìˆ˜**
- ì„¤ê³„ëŠ”:
    - í–‰ splitì€ safe
    - ì—´ splitì€ unsafe + stride
    - block viewëŠ” safe
    - í…ŒìŠ¤íŠ¸ë¡œ aliasingì´ ì—†ìŒì„ ê²€ì¦
---

## í…ŒìŠ¤íŠ¸ ì½”ë“œ

### ğŸŸ¥ 1) ê°€ì¥ ë‹¨ìˆœí•œ ì˜ˆì œ
```rust
fn main() {
    let mut v = vec![10, 20, 30, 40];

    let ptr = v.as_mut_ptr();   // *mut i32
    let len = v.len();          // 4

    // raw pointer â†’ &mut [i32] ìŠ¬ë¼ì´ìŠ¤ë¡œ ì¬êµ¬ì„±
    let s: &mut [i32] = unsafe {
        std::slice::from_raw_parts_mut(ptr, len)
    };

    s[1] = 999;

    println!("{:?}", v); // [10, 999, 30, 40]
}
```
### ğŸŸ¥ 2) ìœ„í—˜í•œ ì˜ˆì œ
```rust
fn main() {
    let mut v = vec![1, 2, 3, 4];

    let ptr = v.as_mut_ptr();
    let len = v.len();

    let a: &mut [i32] = unsafe { std::slice::from_raw_parts_mut(ptr, len) };
    let b: &mut [i32] = unsafe { std::slice::from_raw_parts_mut(ptr, len) };

    // aì™€ bëŠ” ê°™ì€ ë©”ëª¨ë¦¬ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë‘ ê°œì˜ &mut ìŠ¬ë¼ì´ìŠ¤
    // Rust ë©”ëª¨ë¦¬ ëª¨ë¸ì—ì„œëŠ” UB(ì •ì˜ë˜ì§€ ì•Šì€ ë™ì‘)
    a[0] = 100;
    b[1] = 200;

    println!("{:?}", v);
}
```
### 3) ì•ˆì „í•˜ê²Œ ì“°ëŠ” ì˜ˆì œ
```rust
fn main() {
    let mut v = vec![1, 2, 3, 4, 5, 6];

    let ptr = v.as_mut_ptr();

    unsafe {
        // ì™¼ìª½ ì ˆë°˜
        let left = std::slice::from_raw_parts_mut(ptr, 3);

        // ì˜¤ë¥¸ìª½ ì ˆë°˜ (ptr.offset(3))
        let right = std::slice::from_raw_parts_mut(ptr.add(3), 3);

        left[0] = 10;   // v[0]
        right[0] = 99;  // v[3]
    }

    println!("{:?}", v); // [10, 2, 3, 99, 5, 6]
}
```

---

## add

- ptr.add()ëŠ” Rustì—ì„œ raw pointer ì—°ì‚°ì˜ í•µì‹¬.
- C/C++ì˜ ptr + nê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ, RustëŠ” í›¨ì”¬ ë” ì—„ê²©í•˜ê³  ì•ˆì „í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆìŒ.

### ğŸ“Œ 1) ptr.add(n)ì´ë€ ë¬´ì—‡ì¸ê°€
- ptr.add(n)ì€ raw pointerë¥¼ nê°œì˜ ìš”ì†Œë§Œí¼ ì•ìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” í•¨ìˆ˜.
```rust
let new_ptr = ptr.add(n);
```

- ì˜ë¯¸ëŠ”:
    - ptrì´ *mut Të¼ë©´
    - ptr.add(n)ì€ T íƒ€ì… ìš”ì†Œ nê°œ ë’¤ì˜ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¨ë‹¤
    - ì¦‰, ë°”ì´íŠ¸ ë‹¨ìœ„ê°€ ì•„ë‹ˆë¼ ìš”ì†Œ ë‹¨ìœ„ë¡œ ì´ë™
- ì˜ˆ:
```rust
let ptr: *mut i32 = v.as_mut_ptr();
let ptr2 = ptr.add(3);  // i32 3ê°œ ë’¤ â†’ ë°”ì´íŠ¸ë¡œëŠ” 12ë°”ì´íŠ¸ ë’¤
```

- C++ì˜ ptr + 3ê³¼ ë™ì¼í•œ ì˜ë¯¸ì§€ë§Œ, RustëŠ” ëª…ì‹œì ìœ¼ë¡œ í•¨ìˆ˜ í˜¸ì¶œì„ ìš”êµ¬í•œë‹¤.

### ğŸ“Œ 2) ì™œ .add()ê°€ í•„ìš”í•œê°€?
- RustëŠ” ì•ˆì „ì„±ì„ ìœ„í•´ raw pointerì˜ ì‚°ìˆ  ì—°ì‚°ì„ ê¸ˆì§€í•œë‹¤.
- ì¦‰, ë‹¤ìŒì€ ë¶ˆê°€ëŠ¥:
```rust
let ptr2 = ptr + 3; // âŒ Rustì—ì„œëŠ” ê¸ˆì§€
```

- ëŒ€ì‹ :
```rust
let ptr2 = ptr.add(3); // âœ”ï¸ ì•ˆì „í•œ raw pointer ì—°ì‚°
```

- RustëŠ” pointer arithmeticì„ ì˜ë„ì ìœ¼ë¡œ ì–´ë µê²Œ ë§Œë“¤ì–´ì„œ  
    ê°œë°œìê°€ ì‹¤ìˆ˜ë¡œ ë©”ëª¨ë¦¬ ì˜¤ì—¼ì„ ì¼ìœ¼í‚¤ì§€ ì•Šë„ë¡ í•œë‹¤.

### ğŸ“Œ 3) .add()ì˜ íŠ¹ì§•
- âœ” ìš”ì†Œ ë‹¨ìœ„ ì´ë™
    - ptr.add(1)ì€ ptr + sizeof(T) ë°”ì´íŠ¸ ì´ë™.
- âœ” overflow ì²´í¬ ì—†ìŒ
- add()ëŠ” ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ë„ ì²´í¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ê·¸ë˜ì„œ ë°˜ë“œì‹œ ê°œë°œìê°€ ë³´ì¥í•´ì•¼ í•œë‹¤.
- âœ” í•­ìƒ unsafe
```rust
let p2 = unsafe { ptr.add(3) };
```

- ì™œëƒë©´ RustëŠ”:
    - ì´ ì£¼ì†Œê°€ ìœ íš¨í•œì§€
    - ë©”ëª¨ë¦¬ ë²”ìœ„ ì•ˆì¸ì§€
    - alignmentê°€ ë§ëŠ”ì§€
- ì´ê±¸ ì¦ëª…í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸.

### ğŸ“Œ 4) .offset()ê³¼ì˜ ì°¨ì´
- Rustì—ëŠ” .add()ì™€ .offset() ë‘ ê°€ì§€ê°€ ìˆì–´.
- âœ” add(n)
    - unsigned
    - ìŒìˆ˜ ì´ë™ ë¶ˆê°€
    - overflow ì²´í¬ ì—†ìŒ
    - Cì˜ ptr + nê³¼ ë™ì¼
- âœ” offset(n)
    - signed
    - ìŒìˆ˜ ì´ë™ ê°€ëŠ¥
    - Cì˜ ptr + nê³¼ ë™ì¼
    - ì—¬ì „íˆ unsafe
- ì˜ˆ:
```rust
ptr.add(3);     // ì•ìœ¼ë¡œ 3ì¹¸
ptr.offset(-2); // ë’¤ë¡œ 2ì¹¸
```

- ì™œ ë‘ ê°œê°€ ìˆì„ê¹Œ?
    - .add()ëŠ” ì˜¤ì§ ì•ìœ¼ë¡œë§Œ ì´ë™
    - .offset()ì€ ì–‘ë°©í–¥ ì´ë™
- RustëŠ” ê°€ëŠ¥í•œ í•œ ìœ„í—˜í•œ ì—°ì‚°ì„ ë¶„ë¦¬í•´ì„œ ê°œë°œìê°€ ì˜ë„ë¥¼ ëª…í™•íˆ í‘œí˜„í•˜ë„ë¡ ê°•ì œí•œë‹¤.

### ğŸ“Œ 5) .wrapping_add()
- overflowê°€ ë°œìƒí•´ë„ wrap-aroundí•˜ëŠ” ë²„ì „.
```rust
let p2 = ptr.wrapping_add(1000000000);
```

- ì´ê±´ ê±°ì˜ ì“¸ ì¼ì´ ì—†ê³ , ì •ë§ íŠ¹ìˆ˜í•œ low-level ìƒí™©ì—ì„œë§Œ ì‚¬ìš©í•œë‹¤.

### ğŸ“Œ 6) .cast()
- í¬ì¸í„° íƒ€ì…ì„ ë°”ê¾¸ëŠ” ê¸°ëŠ¥.
```rust
let p: *mut u8 = ptr.cast();
```

- Cì˜ (T*)ptrê³¼ ë¹„ìŠ·í•˜ì§€ë§Œ RustëŠ” ë” ëª…í™•í•˜ê²Œ í‘œí˜„í•œë‹¤.

### ğŸ“Œ 7) .as_ref() / .as_mut()
- raw pointerë¥¼ ì•ˆì „í•œ ì°¸ì¡°ë¡œ ë°”ê¾¸ëŠ” í•¨ìˆ˜.
```rust
let r: &mut T = unsafe { ptr.as_mut().unwrap() };
```

- ë‹¨, ì´ê±´ ê·¸ ì£¼ì†Œê°€ ìœ íš¨í•˜ë‹¤ëŠ” ê±¸ ê°œë°œìê°€ ë³´ì¥í•´ì•¼ í•œë‹¤.

### ğŸ“Œ 8) .read() / .write()
- raw pointerì—ì„œ ê°’ì„ ì½ê³  ì“°ëŠ” í•¨ìˆ˜.
```rust
let x = unsafe { ptr.read() };
unsafe { ptr.write(123) };
```

- ì´ê±´ Cì˜ *ptrê³¼ ë™ì¼í•˜ì§€ë§Œ RustëŠ” ëª…ì‹œì ìœ¼ë¡œ unsafeë¥¼ ìš”êµ¬í•œë‹¤.

### ğŸ“Œ 9) .copy_from() / .copy_to()
- ë©”ëª¨ë¦¬ ë³µì‚¬ ê¸°ëŠ¥.
```rust
ptr.copy_from(src_ptr, count);
```
- Cì˜ memcpyì™€ ìœ ì‚¬.

### ğŸ“Œ 10) ë„¤ ì½”ë“œì—ì„œ .add()ê°€ ì“°ì¸ ì´ìœ 
- Matrix ì½”ë“œì—ì„œ:
```rust
let right = std::slice::from_raw_parts_mut(ptr.add(col), ...);
```
- ì´ ì˜ë¯¸ëŠ”:
    - í–‰ë ¬ì˜ ì—´ì„ ê¸°ì¤€ìœ¼ë¡œ splití•  ë•Œ
    - colë²ˆì§¸ ì—´ë¶€í„° ì‹œì‘í•˜ëŠ” block viewë¥¼ ë§Œë“¤ê¸° ìœ„í•´
    - raw pointerë¥¼ col ìš”ì†Œë§Œí¼ ì´ë™ì‹œí‚¤ëŠ” ê²ƒ
- ì¦‰:
    - left block â†’ offset = 0
    - right block â†’ offset = col
- ì´ê±¸ pointer arithmeticìœ¼ë¡œ êµ¬í˜„.

### ğŸ“Œ 11) ì•„ì£¼ ê°„ë‹¨í•œ ì˜ˆì œë¡œ ì •ë¦¬
```rust
fn main() {
    let mut v = vec![10, 20, 30, 40, 50];

    let ptr = v.as_mut_ptr();

    unsafe {
        let p2 = ptr.add(2); // v[2]ì˜ ì£¼ì†Œ
        *p2 = 999;
    }

    println!("{:?}", v); // [10, 20, 999, 40, 50]
}
```

### ğŸ“Œ ê²°ë¡ 
- ptr.add()ëŠ” Rustì—ì„œ raw pointerë¥¼ ë‹¤ë£° ë•Œ ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œë„ ì¤‘ìš”í•œ í•¨ìˆ˜.
    - ìš”ì†Œ ë‹¨ìœ„ ì´ë™
    - overflow ì²´í¬ ì—†ìŒ
    - í•­ìƒ unsafe
    - Cì˜ pointer arithmeticê³¼ ë™ì¼í•œ ê¸°ëŠ¥
    - RustëŠ” ì˜ë„ë¥¼ ëª…í™•íˆ í•˜ê¸° ìœ„í•´ í•¨ìˆ˜ í˜•íƒœë¡œ ì œê³µ


---

## cast

### ğŸŸ¥ 1) ptr.cast()ê°€ í•˜ëŠ” ì¼
- Rustì—ì„œ raw pointerëŠ” íƒ€ì…ì„ ê°€ì§€ê³  ìˆìŒ.
```rust
let p: *mut f64
```

- ì´ê±´ â€œì—¬ê¸° ìˆëŠ” ë©”ëª¨ë¦¬ëŠ” f64ë¡œ í•´ì„í•´ì•¼ í•œë‹¤â€ëŠ” ì˜ë¯¸.
- ê·¸ëŸ°ë° .cast::<U>()ë¥¼ ì“°ë©´:
```rust
let p2: *mut u8 = p.cast();
```

- ì´ê±´ Rustì—ê²Œ ì´ë ‡ê²Œ ë§í•˜ëŠ” ê²ƒì„.
    - **ì´ ë©”ëª¨ë¦¬ë¥¼ ì´ì œë¶€í„° u8ë¡œ í•´ì„.**

- ì¦‰, ë©”ëª¨ë¦¬ì˜ ì‹¤ì œ ë‚´ìš©ì€ ê·¸ëŒ€ë¡œ ë‘ê³ , ê·¸ê±¸ ì–´ë–¤ íƒ€ì…ìœ¼ë¡œ ì½ì„ì§€ ê°œë°œìê°€ ì§ì ‘ ê²°ì •í•˜ëŠ” ê¸°ëŠ¥.
- ì´ê±´ Cì˜ (T*)ptrê³¼ ê±°ì˜ ë™ì¼í•˜ì§€ë§Œ, RustëŠ” ë” ëª…í™•í•˜ê²Œ í‘œí˜„í•˜ë„ë¡ ê°•ì œí•œë‹¤.

### ğŸŸ¥ 2) Fortran ìŠ¤íƒ€ì¼ ë©”ëª¨ë¦¬ í•´í‚¹ì´ ê°€ëŠ¥í•œ ì´ìœ 
- Fortranì€ ì´ëŸ° ì‹ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ ë‹¤ë£¸.
    - ê°™ì€ ë°°ì—´ì— integer, float, doubleì„ ì„ì–´ì„œ ì €ì¥
    - í•„ìš”í•  ë•Œ í˜• ë³€í™˜í•´ì„œ ì½ê¸°
    - ë©”ëª¨ë¦¬ ë ˆì´ì•„ì›ƒì„ ì§ì ‘ í•´ì„
- Rustì—ì„œë„ raw pointer + castë¥¼ ì“°ë©´ ë˜‘ê°™ì€ ë°©ì‹ì´ ê°€ëŠ¥.
- ì˜ˆë¥¼ ë“¤ì–´:
```rust
let mut buf = [0u8; 8];
let p = buf.as_mut_ptr();

// ì—¬ê¸°ì— f64 ê°’ì„ ì¨ë„£ê³ 
unsafe { (p as *mut f64).write(3.14159265); }

// ë‹¤ì‹œ u8 ë°°ì—´ë¡œ ì½ê¸°
println!("{:?}", buf);

// ë‹¤ì‹œ f64ë¡œ ì½ê¸°
let x = unsafe { (p as *mut f64).read() };
println!("{}", x);
```

- ì´ê±´ ì™„ì „íˆ Fortranì‹ ë©”ëª¨ë¦¬ ì ‘ê·¼.

### ğŸŸ¥ 3) Rustì—ì„œ ì´ê²Œ ê°€ëŠ¥í•œ ì´ìœ 
- RustëŠ” raw pointer ì˜ì—­ì—ì„œëŠ” C ìˆ˜ì¤€ì˜ ììœ ë¥¼ í—ˆìš©í•œë‹¤.
    - íƒ€ì… ë¬´ì‹œ
    - alignment ë¬´ì‹œ
    - aliasing ë¬´ì‹œ
    - lifetime ë¬´ì‹œ
- ì¦‰, Rustì˜ ì•ˆì „ì„±ì€ safe ì˜ì—­ì—ì„œë§Œ ë³´ì¥ë˜ê³  raw pointer ì˜ì—­ì—ì„œëŠ”  
    ê°œë°œìê°€ ëª¨ë“  ê±¸ ì±…ì„ì ¸ì•¼ í•œë‹¤.
- ê·¸ë˜ì„œ .cast()ëŠ” ì •ë§ ê°•ë ¥í•œ ê¸°ëŠ¥.

### ğŸŸ¥ 4) í•˜ì§€ë§Œ RustëŠ” Cë³´ë‹¤ ë” ì•ˆì „í•œ ì´ìœ 
- Cì—ì„œëŠ” (float*)ptr ê°™ì€ ìºìŠ¤íŠ¸ê°€ ë„ˆë¬´ ì‰½ê²Œ ì¼ì–´ë‚˜ì§€ë§Œ  
    RustëŠ” ë‹¤ìŒì„ ê°•ì œí•œë‹¤.
- âœ” 1) ë°˜ë“œì‹œ raw pointerì—¬ì•¼ í•œë‹¤
    - &mut T ê°™ì€ ì•ˆì „í•œ ì°¸ì¡°ì—ì„œëŠ” cast ë¶ˆê°€ëŠ¥
    - ì•ˆì „í•œ ì˜ì—­ì„ ë³´í˜¸
- âœ” 2) ë°˜ë“œì‹œ unsafe ë¸”ë¡ ì•ˆì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥
    - ê°œë°œìê°€ â€œë‚´ê°€ ì±…ì„ì§„ë‹¤â€ëŠ” ì„ ì–¸
- âœ” 3) alignmentë¥¼ ê°œë°œìê°€ ì§ì ‘ ë³´ì¥í•´ì•¼ í•œë‹¤
    - ì˜ˆ: *mut f64ëŠ” 8ë°”ì´íŠ¸ ì •ë ¬ í•„ìš”
- âœ” 4) aliasing ê·œì¹™ì„ ê°œë°œìê°€ ì§ì ‘ ë³´ì¥í•´ì•¼ í•œë‹¤
    - RustëŠ” aliasing ê¸°ë°˜ ìµœì í™”ë¥¼ í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ì¤‘ìš”
- ì¦‰, RustëŠ” Cì˜ ììœ  + Rustì˜ ì±…ì„ ëª¨ë¸ì„ ê²°í•©í•œ êµ¬ì¡°.

### ğŸŸ¥ 5) Fortran-style êµ¬ì¡°ë¥¼ Rustì—ì„œ êµ¬í˜„í•˜ëŠ” ì˜ˆì œ
- ì˜ˆë¥¼ ë“¤ì–´, í•˜ë‚˜ì˜ ë²„í¼ì— ì—¬ëŸ¬ íƒ€ì…ì„ ì €ì¥í•˜ê³  ì‹¶ë‹¤ë©´:
```rust
#[repr(C)]
struct Mixed {
    a: i32,
    b: f32,
    c: f64,
}

fn main() {
    let mut buf = [0u8; std::mem::size_of::<Mixed>()];

    let p = buf.as_mut_ptr();

    unsafe {
        let mixed_ptr = p.cast::<Mixed>();
        (*mixed_ptr).a = 10;
        (*mixed_ptr).b = 3.14;
        (*mixed_ptr).c = 2.71828;
    }

    unsafe {
        let mixed_ptr = p.cast::<Mixed>();
        println!("a = {}", (*mixed_ptr).a);
        println!("b = {}", (*mixed_ptr).b);
        println!("c = {}", (*mixed_ptr).c);
    }
}
```

- ì´ê±´ ì™„ì „íˆ Fortranì‹ ë©”ëª¨ë¦¬ í•´ì„.

### ğŸŸ© ê²°ë¡ 
- Fortranì´ í•œ ë°°ì—´ì— integer, floatë¥¼ ë‹´ì•„ì„œ ì €ì¥í•´ë²„ë¦¬ë©´  
    í˜• ë³€í™˜í•´ì„œ ê°’ì„ ê°€ì ¸ì™€ì•¼ í•  ë•Œ ìœ ìš©í•  ê²ƒ ê°™ë‹¤

- í•˜ì§€ë§Œ RustëŠ”:
    - safe ì˜ì—­ì—ì„œëŠ” ì ˆëŒ€ ì´ëŸ° ê±¸ í—ˆìš©í•˜ì§€ ì•Šê³ 
    - unsafe ì˜ì—­ì—ì„œë§Œ ê°œë°œìê°€ ì±…ì„ì§€ê³  ì‚¬ìš©í•˜ë„ë¡ ê°•ì œí•œë‹¤
- ê·¸ë˜ì„œ RustëŠ” Cë³´ë‹¤ í›¨ì”¬ ì•ˆì „í•˜ë©´ì„œë„  
    í•„ìš”í•  ë•ŒëŠ” Cë³´ë‹¤ ë” ê°•ë ¥í•œ low-level ì œì–´ê°€ ê°€ëŠ¥.

---
