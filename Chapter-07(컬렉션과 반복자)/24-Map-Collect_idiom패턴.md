# iter().map(|(k, _)| k).collect::<Vec<_>>() íŒ¨í„´ í™œìš©

`iter().map(|(k, _)| k).collect::<Vec<_>>()` ê°™ì€ íŒ¨í„´ì€ Vecë‚˜ ë°°ì—´ì—ì„œë„ ì¶©ë¶„íˆ í™œìš© ê°€ëŠ¥. 
ë‹¤ë§Œ Vecê³¼ ë°°ì—´ì€ (key, value) ìŒì´ ì•„ë‹ˆë¼ ê°’ë§Œ ìˆëŠ” ìˆœì°¨ ì»¬ë ‰ì…˜ì´ê¸° ë•Œë¬¸ì—, map()ì˜ ëŒ€ìƒì´ ë‹¬ë¼ì§ˆ ë¿.

## âœ… Vecì—ì„œ map + collect ì˜ˆì œ
```rust
fn main() {
    let numbers = vec![1, 2, 3, 4, 5];

    // ê° ìš”ì†Œë¥¼ ì œê³±í•´ì„œ ìƒˆë¡œìš´ Vec ìƒì„±
    let squares: Vec<i32> = numbers.iter().map(|x| x * x).collect();

    println!("{:?}", squares); // [1, 4, 9, 16, 25]
}
```

- iter() â†’ ë¶ˆë³€ ì°¸ì¡°
- map(|x| x * x) â†’ ê° ìš”ì†Œ ì²˜ë¦¬
- collect() â†’ ê²°ê³¼ë¥¼ Vecìœ¼ë¡œ ìˆ˜ì§‘

## ğŸ”„ Vecì—ì„œ ì¸ë±ìŠ¤ ê¸°ë°˜ ìˆ˜ì • ì˜ˆì œ
```rust
fn main() {
    let mut numbers = vec![1, 2, 3, 4, 5];
    // ì¸ë±ìŠ¤ë¥¼ ìˆ˜ì§‘í•´ì„œ ìˆ˜ì •
    for i in (0..numbers.len()).collect::<Vec<_>>() {
        numbers[i] *= 10;
    }
    println!("{:?}", numbers); // [10, 20, 30, 40, 50]
}
```

- 0..numbers.len() â†’ ì¸ë±ìŠ¤ ìƒì„±
- collect::<Vec<_>>() â†’ ë³µì‚¬ë³¸ í™•ë³´ (ìˆ˜ì • ê°€ëŠ¥)
- for i in ... â†’ ì•ˆì „í•˜ê²Œ ìˆ˜ì •

## ğŸ§® ë°°ì—´ì—ì„œë„ ê°€ëŠ¥ (ë‹¨, ê³ ì • í¬ê¸°)
```rust
fn main() {
    let arr = [1, 2, 3, 4, 5];

    let doubled: Vec<i32> = arr.iter().map(|x| x * 2).collect();

    println!("{:?}", doubled); // [2, 4, 6, 8, 10]
}
```
- ë°°ì—´ë„ iter() ê°€ëŠ¥
- ê²°ê³¼ëŠ” Vecìœ¼ë¡œ ìˆ˜ì§‘  


## ğŸ”„ ë°°ì—´ì—ì„œ ì¸ë±ìŠ¤ ê¸°ë°˜ ìˆ˜ì • ì˜ˆì œ
ë°°ì—´ì—ì„œë„ ì´ ë°©ì‹ì€ ê°€ëŠ¥í•˜ì§€ë§Œ ì¡°ê±´ì´ ìˆìŒ.  
í•µì‹¬ì€ ë°°ì—´ì´ **ê°€ë³€(mutable)** ì´ì–´ì•¼ í•˜ê³ , numbers[i]ì²˜ëŸ¼ ì¸ë±ìŠ¤ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ì .
### âœ… ì˜ˆì œ: ë°°ì—´ì—ì„œ map + collectë¡œ ì¸ë±ìŠ¤ ìˆ˜ì •
```rust
fn main() {
    let mut numbers = [1, 2, 3, 4, 5];

    for i in (0..numbers.len()).collect::<Vec<_>>() {
        numbers[i] *= 10;
    }

    println!("{:?}", numbers); // [10, 20, 30, 40, 50]
}
```
ğŸ” ì„¤ëª…
- `0..numbers.len()` â†’ ì¸ë±ìŠ¤ ë²”ìœ„ ìƒì„±
- `.collect::<Vec<_>>()` â†’ ì¸ë±ìŠ¤ë¥¼ ë³µì‚¬í•´ ìˆ˜ì • ê°€ëŠ¥
- `numbers[i] *= 10` â†’ ë°°ì—´ ìš”ì†Œ ìˆ˜ì •

### âš ï¸ ì£¼ì˜í•  ì 
- ë°°ì—´ì€ ê³ ì • í¬ê¸°ì´ë¯€ë¡œ push, remove ê°™ì€ ë™ì‘ì€ ë¶ˆê°€ëŠ¥
- collect()ëŠ” ì¸ë±ìŠ¤ë¥¼ ë³µì‚¬í•´ì˜¤ëŠ” ê²ƒì´ë¯€ë¡œ ë¶ˆë³€ ìˆœíšŒ ì¤‘ ìˆ˜ì •í•  ë•Œ ìœ ìš©
- ì´ ë°©ì‹ì€ Vecì—ì„œë„ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤


### ğŸ’¡ ëŒ€ì•ˆ: iter_mut()ë¡œ ë” ê°„ë‹¨í•˜ê²Œ
ë°°ì—´ì´ë‚˜ Vecì—ì„œëŠ” ì•„ë˜ì²˜ëŸ¼ iter_mut()ì„ ì“°ëŠ” ê²Œ ë” ì¼ë°˜ì :
```rust
fn main() {
    let mut numbers = [1, 2, 3, 4, 5];

    for num in numbers.iter_mut() {
        *num *= 10;
    }

    println!("{:?}", numbers); // [10, 20, 30, 40, 50]
}
```

- ë” ê°„ê²°í•˜ê³  ì•ˆì „í•œ ë°©ì‹
- collect() ì—†ì´ ë°”ë¡œ ìˆ˜ì • ê°€ëŠ¥

## ğŸ” ìš”ì•½
| ì»¬ë ‰ì…˜ íƒ€ì… | map + collect ì‚¬ìš© ê°€ëŠ¥ | ìˆ˜ì • ë°©ì‹         | ì‚­ì œ ë°©ì‹         | íŠ¹ì§•                         |
|-------------|--------------------------|--------------------|--------------------|------------------------------|
| Vec<T>      | âœ…                        | ì§ì ‘ ì¸ë±ìŠ¤ ì ‘ê·¼    | swap_remove, retain | ìˆœì„œ ë³´ì¥, ìœ ì—°í•œ êµ¬ì¡°         |
| [T; N]      | âœ… (iter()ë¡œ ê°€ëŠ¥)        | ë¶ˆê°€ëŠ¥ (ë¶ˆë³€ ë°°ì—´)  | ë¶ˆê°€ëŠ¥             | ê³ ì • í¬ê¸°, ì œí•œì  í™œìš©         |
| Slab<T>     | âœ… (iter()ë¡œ í‚¤ ì¶”ì¶œ)     | remove/insert      | remove(key)        | ì¸ë±ìŠ¤ ì¬ì‚¬ìš©, ë¹ ë¥¸ ì‚­ì œ       |


---

## ğŸ” ì™œ for + collect::<Vec<_>>()ê°€ ìœ ë¦¬í• ê¹Œ?
### âœ… ëª…ì‹œì ì¸ ì¸ë±ìŠ¤
```rust
for i in (0..vec.len()).collect::<Vec<_>>() {
    // iëŠ” usize, vec[i]ë¡œ ì§ì ‘ ì ‘ê·¼ ê°€ëŠ¥
}
```
- ì¸ë±ìŠ¤ë¥¼ í†µí•´ ì´ì „/ë‹¤ìŒ ìš”ì†Œ, ì§ìˆ˜/í™€ìˆ˜ ì¡°ê±´, ì¡°ê±´ë¶€ ì‚­ì œ ë“± ë‹¤ì–‘í•œ ë¡œì§ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.
  
### âœ… ëª…í™•í•œ ìŠ¤ì½”í”„
- for ë£¨í”„ëŠ” ìŠ¤ì½”í”„ê°€ ëª…í™•í•´ì„œ ë£¨í”„ ì•ˆì—ì„œ ë³€ìˆ˜ ì„ ì–¸, ì¡°ê±´ ë¶„ê¸°, break, continue ë“±ì„ ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.
- ë°˜ë©´ map()ì´ë‚˜ for_each()ëŠ” í‘œí˜„ì‹ ê¸°ë°˜ì´ë¼ ë³µì¡í•œ íë¦„ ì œì–´ì—ëŠ” ë¶ˆë¦¬.

### ğŸ§ª ì˜ˆì‹œ: ì§ìˆ˜ ì¸ë±ìŠ¤ë§Œ ìˆ˜ì •
```rust
fn main() {
    let mut vec = vec![10, 20, 30, 40, 50];
    for i in (0..vec.len()).collect::<Vec<_>>() {
        if i % 2 == 0 {
            vec[i] += 1;
        }
    }
    println!("{:?}", vec); // [11, 20, 31, 40, 51]
}
```
- í´ë¡œì €ë¡œëŠ” ië¥¼ ì§ì ‘ ë‹¤ë£¨ê¸° ì–´ë µì§€ë§Œ, for ë£¨í”„ëŠ” ììœ ë¡­ì£ .

## ğŸ’¡ ê²°ë¡ 

| ìŠ¤íƒ€ì¼        | ì¥ì                                  | ë‹¨ì                                  | ì¶”ì²œ ìƒí™©                         |
|---------------|--------------------------------------|--------------------------------------|----------------------------------|
| for + index   | ëª…í™•í•œ íë¦„ ì œì–´, ì¡°ê±´ ë¶„ê¸°, ì¸ë±ìŠ¤ ì ‘ê·¼ ê°€ëŠ¥ | ì½”ë“œê°€ ì•½ê°„ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆìŒ             | ë³µì¡í•œ ë¡œì§, ìˆ˜ì •/ì‚­ì œê°€ í•„ìš”í•œ ê²½ìš° |
| map / for_each| ê°„ê²°í•˜ê³  ì„ ì–¸ì , í•¨ìˆ˜í˜• ìŠ¤íƒ€ì¼         | ì¸ë±ìŠ¤ ì ‘ê·¼ ë¶ˆí¸, íë¦„ ì œì–´ ì œí•œ         | ë‹¨ìˆœ ë³€í™˜, í•„í„°ë§, ìˆ˜ì§‘ ì‘ì—…        |
----

# slabì— ì‚¬ìš©

slabì„ ìˆœíšŒí•˜ë©´ì„œ ê° í•­ëª©ì„ ìˆ˜ì •í•˜ëŠ” ë°©ì‹ì¸ë°, map()ê³¼ collect()ë¥¼ í™œìš©í•œ íŒ¨í„´ì´ ì¡°ê¸ˆ ë‚¯ì„¤ ìˆ˜ ìˆìŒ.  
ì•„ë˜ì— ë‹¨ê³„ë³„ ì„¤ëª…ê³¼ í•¨ê»˜ ì¼ë°˜ì ì¸ ì˜ˆì œ ì œê³µ.

## ğŸ§  ì½”ë“œ ë¶„ì„: ë‹¨ê³„ë³„ ì„¤ëª…
```rust
for key in slab.iter().map(|(k, _)| k).collect::<Vec<_>>() {
    slab[key] = Arc::new(MyData { value: slab[key].value * 10 });
}
```

## ğŸ” ë‹¨ê³„ë³„ë¡œ ìª¼ê°œë©´:
- `slab.iter()`  
    â†’ Slabì˜ ëª¨ë“  (key, value) ìŒì„ ë°˜ë³µì í˜•íƒœë¡œ ë°˜í™˜.
- `.map(|(k, _)| k)`  
    â†’ ê° (key, value) ìŒì—ì„œ `key` ë§Œ ì¶”ì¶œ.
- `.collect::<Vec<_>>()`  
    â†’ ì¶”ì¶œí•œ í‚¤ë“¤ì„ Vec<usize>ë¡œ ìˆ˜ì§‘.
- `for key in ...`  
    â†’ í‚¤ë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ slab[key]ì— ì ‘ê·¼.
- `slab[key] = Arc::new(...)`  
    â†’ í•´ë‹¹ í‚¤ì˜ ê°’ì„ ìƒˆë¡œ í• ë‹¹ (ìˆ˜ì •).
## âœ… ì™œ ì´ë ‡ê²Œ ì“°ëŠ”ê°€?
- `slab.iter()` ì€ &selfë¥¼ ë¹Œë ¤ì˜¤ë¯€ë¡œ ì§ì ‘ ìˆ˜ì •ì´ ë¶ˆê°€ëŠ¥.
- `collect()` ë¡œ í‚¤ë¥¼ ë³µì‚¬í•´ì˜¤ë©´ ì´í›„ì— `slab[key] = ...` ì²˜ëŸ¼ ìˆ˜ì •ì´ ê°€ëŠ¥.
- ì´ íŒ¨í„´ì€ ë¶ˆë³€ ìˆœíšŒ â†’ ìˆ˜ì •ì„ ì•ˆì „í•˜ê²Œ ë¶„ë¦¬í•˜ëŠ” ë° ìœ ìš©.

## ğŸ§ª ì¼ë°˜ì ì¸ ì˜ˆì œ: ì‚¬ìš©ì ì ìˆ˜ ìˆ˜ì •
```rust
use slab::Slab;
use std::sync::Arc;

#[derive(Debug)]
struct User {
    name: String,
    score: u32,
}

fn main() {
    let mut users: Slab<Arc<User>> = Slab::new();
    // ì´ˆê¸° ë°ì´í„° ì‚½ì…
    users.insert(Arc::new(User { name: "Alice".into(), score: 50 }));
    users.insert(Arc::new(User { name: "Bob".into(), score: 70 }));
    users.insert(Arc::new(User { name: "Charlie".into(), score: 90 }));
    // ëª¨ë“  ì‚¬ìš©ì ì ìˆ˜ 2ë°°ë¡œ ìˆ˜ì •
    for key in users.iter().map(|(k, _)| k).collect::<Vec<_>>() {
        let old = &users[key];
        users[key] = Arc::new(User {
            name: old.name.clone(),
            score: old.score * 2,
        });
    }

    // ê²°ê³¼ ì¶œë ¥
    for (key, user) in users.iter() {
        println!("{} (key {}): score = {}", user.name, key, user.score);
    }
}
```

## ğŸ§© íŒ
- ì´ íŒ¨í„´ì€ HashMap, Vec, BTreeMap ë“±ì—ì„œë„ ìœ ì‚¬í•˜ê²Œ í™œìš© ê°€ëŠ¥.
- collect::<Vec<_>>()ëŠ” ë¶ˆë³€ ìˆœíšŒ ì¤‘ ìˆ˜ì •ì´ í•„ìš”í•  ë•Œ ë§¤ìš° ìœ ìš©.
- Arcë¥¼ ì“°ëŠ” ê²½ìš°ì—ëŠ” ë¶ˆë³€ ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ êµì²´í•˜ëŠ” ë°©ì‹ì´ ì¼ë°˜ì .

---
