## 📐 동차 공간에서의 스케일 변환 의미

### 1. 서론

- 기하학에서 "스케일 변환"은 객체의 크기를 조절하는 기본적인 연산이다. 하지만 동차 좌표(homogeneous coordinates) 공간에서는 단순한 스케일이 아닌,   
  기준점(center)을 기준으로 한 스케일이 자주 사용된다.
- 이 문서는 동차 공간에서의 스케일 변환이 어떻게 정의되고, 왜 그렇게 동작하는지를 수학적으로 설명한다.

### 2. 유클리드 공간에서의 스케일 변환

- 유클리드 공간에서 어떤 점 p를 기준점 c을 기준으로 스케일링하면 다음과 같은 식이 성립한다:
```math                                    
[ p' = c + S(p - c) ]
```
- 여기서:
  - p: 원래의 점
  - c: 기준점 (center)
  - S: 스케일 행렬 (보통 대각 행렬)
- $p'$: 스케일된 결과 점

- 이 식은 **p 를 c 기준으로 이동 → 스케일 → 다시 c로 이동** 이라는 의미를 가진다.

## 3. 동차 좌표에서의 표현
- 동차 좌표에서는 점 p를 다음과 같이 표현한다:
```math
[ Pw = (w \cdot p, w) ]
```
- 즉, 동차 좌표는 (x, y, z, w) 형태이며, 유클리드 좌표로 복원하려면 p = (x/w, y/w, z/w) 이다.
- 기준점 c 도 동차로 표현하면:
```math
[ Cw = (w \cdot c, w) ]
```

## 4. 동차 공간에서의 스케일 공식
- 동차 공간에서 기준점 Cw 을 기준으로 스케일링하면 다음과 같은 식이 성립한다:
```math
[ Pw' = Cw + S(Pw - Cw) ]
```
- 이 식을 전개하면:
```math
[ Pw' = S \cdot Pw + (I - S) \cdot Cw ]
```

- 여기서:
  - S: 스케일 행렬 (4×4, 마지막 행은 w 유지)
  - I: 항등 행렬
  - Pw: 원래의 동차 좌표
  - Cw: 기준점의 동차 좌표
- 이 식은 유클리드 공간에서의 p' = c + S(p - c)와 정확히 대응된다.

## 5. 구현 예시 (Rust 스타일)
```rust
fn scale_about_center(pw: Point4D, center: Point3D, scale: Vector3D) -> Point4D {
    let w = pw.w;
    let cw = Point4D::from_point3_weight(center, w);

    Point4D {
        x: scale.x * pw.x + (1.0 - scale.x) * cw.x,
        y: scale.y * pw.y + (1.0 - scale.y) * cw.y,
        z: scale.z * pw.z + (1.0 - scale.z) * cw.z,
        w,
    }
}
```
- 이 구현은 다음을 수행한다:
  - Pw를 각 축에 대해 스케일링
  - 기준점 Cw을 보정하여 $(I - S) \cdot Cw$ 항을 더함
  - w는 유지

## 6. 왜 동차 공간에서 이렇게 정의되는가?
- 동차 공간은 변환 행렬을 일관되게 적용할 수 있는 공간이다. 특히:
- 평행 이동, 회전, 스케일, 투영을 모두 하나의 행렬로 표현 가능
- 기준점 기반 스케일을 단일 행렬로 표현하려면 위와 같은 구조가 필요
- 이 방식은 CAD, 그래픽스, NURBS 커널 등에서 널리 사용된다.

## 7. 결론
- 동차 공간에서의 스케일은 단순한 $S \cdot Pw$ 가 아니라, 기준점을 고려한 $S \cdot Pw + (I - S) \cdot Cw$ 형태로 정의된다.
- 이 구조는 유클리드 공간에서의 **center 기준 스케일** 과 정확히 대응되며, 기하학적 일관성과 변환의 일반성을 보장한다.

---
